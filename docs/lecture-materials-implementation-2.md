# ğŸ“š noteè¨˜äº‹è‡ªå‹•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€å®Ÿè£…ç·¨â‘¡ã€‘è¬›ç¾©è³‡æ–™

> **ğŸ“… é–‹å‚¬**: 2025å¹´10æœˆ22æ—¥ 21:30-22:30 (60åˆ†)  
> **ğŸ¯ ãƒ†ãƒ¼ãƒ**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ·±æ˜ã‚Šãƒ»Claude Codeæ´»ç”¨ãƒ»å®Ÿè£…ãƒã‚¦ãƒã‚¦  
> **ğŸ‘¥ å¯¾è±¡**: ä¸­ç´šã€œä¸Šç´šé–‹ç™ºè€…å‘ã‘

---

## ğŸ“– è¬›ç¾©æ¦‚è¦

### ğŸ¯ å­¦ç¿’ç›®æ¨™
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£**: Next.js 14 + Claude Code ã§ã®åŠ¹ç‡çš„é–‹ç™ºæ‰‹æ³•
- **å®Ÿè£…ãƒã‚¦ãƒã‚¦**: å‹å®‰å…¨æ€§ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆãƒ»GitHubé€£æº
- **å®Ÿè·µã‚¹ã‚­ãƒ«**: ãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ»é‹ç”¨æœ€é©åŒ–

### â° ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«
| æ™‚é–“ | å†…å®¹ | è©³ç´° |
|------|------|------|
| 21:30-21:40 | **å°å…¥** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»Phase 1.5æˆæœ |
| 21:40-21:55 | **Claude Codeæ´»ç”¨è¡“** | å®Ÿè·µçš„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»åŠ¹ç‡åŒ–ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ |
| 21:55-22:10 | **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è§£èª¬** | è¨­è¨ˆæ€æƒ³ãƒ»æŠ€è¡“é¸å®šç†ç”± |
| 22:10-22:25 | **å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ç´¹ä»‹** | ã‚³ãƒ¼ãƒ‰ä¾‹ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ |
| 22:25-22:30 | **Q&Aãƒ»æ¬¡å›äºˆå‘Š** | è³ªå•å¯¾å¿œãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ— |

---

## 1ï¸âƒ£ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ & Phase 1.5 æˆæœ

### ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±

**ğŸ¯ ç›®çš„**: SEOã«å¼·ããƒ»èª­ã¾ã‚Œã‚‹noteè¨˜äº‹ã®è‡ªå‹•ç”Ÿæˆ  
**ğŸ¨ ç‰¹å¾´**: AIã£ã½ããªã„è‡ªç„¶ãªæ—¥æœ¬èªè¡¨ç¾  
**ğŸ”„ ç¯„å›²**: æ§‹æˆâ†’åŸ·ç­†â†’ç”»åƒâ†’SNS ã®ä¸€æ°—é€šè²«è‡ªå‹•åŒ–  

### âœ… Phase 1.5 å®Œäº†æˆæœ

| æ©Ÿèƒ½ | èª¬æ˜ | æŠ€è¡“è¦ç´  |
|------|------|----------|
| **çµ±åˆãƒªã‚µãƒ¼ãƒ** | Google Search + noteåˆ†æ + SNSãƒˆãƒ¬ãƒ³ãƒ‰ | Tavily API, ä¸¦åˆ—å‡¦ç† |
| **éŸ³å£°å…¥åŠ›å¯¾å¿œ** | Web Speech API ã§ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢å…¥åŠ› | ãƒ–ãƒ©ã‚¦ã‚¶API, ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç† |
| **A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½** | è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç”Ÿæˆãƒ»æ¯”è¼ƒãƒ»æœ€é©åŒ– | ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆæ¸¬, çµ±è¨ˆåˆ†æ |
| **Next.js 14ç§»è¡Œ** | App Router + SSRæœ€é©åŒ– | æ®µéšçš„ç§»è¡Œ, ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š |

---

## 2ï¸âƒ£ Claude Code æ´»ç”¨è¡“ï¼ˆå®Ÿæ¼”ä¸­å¿ƒï¼‰

### ğŸ¤– Claude Code ã¨ã¯
- **AIé–‹ç™ºã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ**: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»è§£æãƒ»æœ€é©åŒ–ã‚’æ”¯æ´
- **è‡ªç„¶è¨€èªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: æ—¥æœ¬èªã§ã®æŒ‡ç¤ºã§ã‚³ãƒ¼ãƒ‰ä½œæˆ
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç†è§£**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’æŠŠæ¡ã—ãŸææ¡ˆ

### ğŸ’¡ å®Ÿè·µçš„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹

#### âœ¨ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```
Next.js 14ã®App Routerã‚’ä½¿ã£ã¦ã€è¨˜äº‹ç”Ÿæˆã®é€²æ—ã‚’è¡¨ç¤ºã™ã‚‹
StepIndicatorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

è¦ä»¶:
- TypeScriptã§å‹å®‰å…¨ã«å®Ÿè£…
- Tailwind CSSã§ãƒ¢ãƒ€ãƒ³ãªUI
- å„ã‚¹ãƒ†ãƒƒãƒ—ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- ä»¥ä¸‹ã®ProcessStep enumã«å¯¾å¿œ

enum ProcessStep {
  IDLE = 'IDLE',
  RESEARCH = 'çµ±åˆãƒªã‚µãƒ¼ãƒä¸­...',
  ANALYZING = 'SEOåˆ†æä¸­...',
  WRITING = 'è¨˜äº‹æœ¬æ–‡ã®åŸ·ç­†ä¸­...',
  GENERATING_IMAGE = 'ç”»åƒç”Ÿæˆä¸­...',
  DONE = 'å®Œäº†'
}
```

#### ğŸ› ãƒã‚°ä¿®æ­£ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```
ä»¥ä¸‹ã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚
åŸå› ã‚’ç‰¹å®šã—ã€ä¿®æ­£æ¡ˆã‚’æç¤ºã—ã¦ãã ã•ã„:

[ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘]

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:
TypeError: Cannot read properties of undefined (reading 'map')

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ„å›³ã—ãŸå‹•ä½œã¨ã€
ã“ã®ã‚¨ãƒ©ãƒ¼ã‚’é˜²ããŸã‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚‚æ•™ãˆã¦ãã ã•ã„ã€‚
```

#### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```
ç¾åœ¨ã®Next.jsã‚¢ãƒ—ãƒªã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã—ãŸã„ã§ã™ã€‚
ä»¥ä¸‹ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹å…·ä½“çš„ãªæ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„:

1. åˆæœŸèª­ã¿è¾¼ã¿ãŒ3ç§’ä»¥ä¸Šã‹ã‹ã‚‹
2. ç”»åƒã®è¡¨ç¤ºãŒé…ã„  
3. ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒ500KBè¶…é

ç¾åœ¨ã®æ§‹æˆ:
- Next.js 14 App Router
- TypeScript
- Tailwind CSS
- å¤–éƒ¨API: Gemini AI, Supabase
```

### ğŸ”„ Claude Code é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
é–‹ç™ºãƒ•ãƒ­ãƒ¼
â”œâ”€â”€ 1. æ©Ÿèƒ½è¦ä»¶ã‚’Claude Codeã«ç›¸è«‡
â”œâ”€â”€ 2. å‹å®šç¾©ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
â”œâ”€â”€ 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
â”œâ”€â”€ 4. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
â”œâ”€â”€ 5. ãƒã‚°ä¿®æ­£ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
â”œâ”€â”€ 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â””â”€â”€ 7. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
```

---

## 3ï¸âƒ£ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ·±æ˜ã‚Š

### ğŸ—ï¸ è¨­è¨ˆæ€æƒ³

#### ğŸ¯ è¨­è¨ˆåŸå‰‡
1. **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: 1ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ = 1è²¬ä»»
2. **é–‹æ”¾é–‰é–ã®åŸå‰‡**: æ‹¡å¼µã«é–‹ãã€ä¿®æ­£ã«é–‰ã˜ã‚‹
3. **ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡**: æŠ½è±¡ã«ä¾å­˜ã™ã‚‹
4. **é–¢å¿ƒã®åˆ†é›¢**: UI â†” ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ â†” ãƒ‡ãƒ¼ã‚¿

#### ğŸ§© ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 
```
ğŸ“± Presentation Layer (UI)
â”œâ”€â”€ app/ - Next.js App Router
â”œâ”€â”€ components/ - React Components  
â””â”€â”€ hooks/ - Custom Hooks

ğŸ§  Business Logic Layer
â”œâ”€â”€ services/ - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ utils/ - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â””â”€â”€ contexts/ - çŠ¶æ…‹ç®¡ç†

ğŸ—„ï¸ Data Access Layer  
â”œâ”€â”€ api/ - å¤–éƒ¨APIçµ±åˆ
â”œâ”€â”€ database/ - DBæ“ä½œ
â””â”€â”€ storage/ - ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

ğŸ”§ Infrastructure Layer
â”œâ”€â”€ config/ - è¨­å®šç®¡ç†
â”œâ”€â”€ types/ - å‹å®šç¾©
â””â”€â”€ constants/ - å®šæ•°å®šç¾©
```

### ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆ

#### Next.js 14 App Router
```typescript
// app/layout.tsx - ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ja">
      <body>
        <ClientProviders>
          {children}
        </ClientProviders>
      </body>
    </html>
  )
}

// app/page.tsx - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
'use client';
export default function HomePage() {
  const { state, generateArticle } = useArticleGeneration();
  
  return (
    <div className="container mx-auto px-4">
      <InputForm onSubmit={generateArticle} />
      <StepIndicator currentStep={state.currentStep} />
      <OutputDisplay output={state.output} />
    </div>
  );
}
```

#### SSR/CSRæœ€é©åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// Dynamic Import for Client-side Components
const VoiceIdeaProcessor = dynamic(
  () => import('@/components/audio/VoiceIdeaProcessor'),
  { 
    ssr: false,
    loading: () => <div>éŸ³å£°æ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
  }
);

// Client Providersåˆ†é›¢
'use client';
export function ClientProviders({ children }: ProvidersProps) {
  return (
    <ThemeProvider>
      <AudioProvider>
        {children}
      </AudioProvider>
    </ThemeProvider>
  );
}
```

### ğŸ§  ã‚µãƒ¼ãƒ“ã‚¹å±¤è¨­è¨ˆ

#### Gemini AIçµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// services/ai/geminiService.ts
import { GoogleGenAI } from "@google/genai";

class GeminiService {
  private genAI: GoogleGenAI;
  
  constructor(apiKey: string) {
    this.genAI = new GoogleGenAI(apiKey);
  }

  async createArticleOutline(
    keyword: string,
    tone: Tone,
    audience: Audience
  ): Promise<ArticleOutline> {
    const model = this.genAI.getGenerativeModel({ 
      model: "gemini-2.5-flash" 
    });
    
    const prompt = this.buildOutlinePrompt(keyword, tone, audience);
    
    return await this.withRetry(async () => {
      const result = await model.generateContent(prompt);
      return this.parseOutlineResponse(result.response.text());
    });
  }

  private async withRetry<T>(
    operation: () => Promise<T>,
    maxRetries: number = 3
  ): Promise<T> {
    for (let attempt = 0; attempt <= maxRetries; attempt++) {
      try {
        return await operation();
      } catch (error) {
        if (attempt === maxRetries) throw error;
        await this.delay(1000 * Math.pow(2, attempt));
      }
    }
    throw new Error('Max retries exceeded');
  }
}
```

---

## 4ï¸âƒ£ å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ & ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ğŸª AIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè£…

#### ã‚¹ãƒ†ãƒƒãƒ—ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// çŠ¶æ…‹ç®¡ç†
enum ProcessStep {
  IDLE = 'IDLE',
  RESEARCH = 'çµ±åˆãƒªã‚µãƒ¼ãƒä¸­...',
  ANALYZING = 'SEOåˆ†æä¸­...',
  WRITING = 'è¨˜äº‹æœ¬æ–‡ã®åŸ·ç­†ä¸­...',
  GENERATING_IMAGE = 'ç”»åƒç”Ÿæˆä¸­...',
  GENERATING_X_POSTS = 'Xå‘ŠçŸ¥æ–‡ç”Ÿæˆä¸­...',
  DONE = 'å®Œäº†',
  ERROR = 'ã‚¨ãƒ©ãƒ¼'
}

interface GenerationState {
  currentStep: ProcessStep;
  isGenerating: boolean;
  progress: number;
  output: FinalOutput | null;
  error: string | null;
}

// Custom Hook
function useArticleGeneration() {
  const [state, setState] = useState<GenerationState>(initialState);

  const generateArticle = useCallback(async (formData: FormData) => {
    setState(prev => ({ ...prev, isGenerating: true }));
    
    try {
      // Step 1: Research
      setState(prev => ({ ...prev, currentStep: ProcessStep.RESEARCH }));
      const research = await performResearch(formData.keyword);
      
      // Step 2: Analysis
      setState(prev => ({ ...prev, currentStep: ProcessStep.ANALYZING }));
      const analysis = await analyzeSEO(research);
      
      // Step 3: Writing
      setState(prev => ({ ...prev, currentStep: ProcessStep.WRITING }));
      const article = await writeArticle(analysis, formData);
      
      // Step 4: Image Generation
      setState(prev => ({ ...prev, currentStep: ProcessStep.GENERATING_IMAGE }));
      const image = await generateImage(article, formData.imageTheme);
      
      // Final Result
      setState(prev => ({ 
        ...prev, 
        currentStep: ProcessStep.DONE,
        output: { article, image, analysis }
      }));
      
    } catch (error) {
      setState(prev => ({ 
        ...prev, 
        currentStep: ProcessStep.ERROR,
        error: error.message 
      }));
    } finally {
      setState(prev => ({ ...prev, isGenerating: false }));
    }
  }, []);

  return { state, generateArticle };
}
```

### ğŸµ éŸ³å£°å…¥åŠ›å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// services/audio/speechRecognitionService.ts
export class SpeechRecognitionService {
  private recognition: SpeechRecognition | null = null;
  private isListening = false;

  constructor() {
    if (this.isSpeechRecognitionSupported()) {
      this.setupRecognition();
    }
  }

  private isSpeechRecognitionSupported(): boolean {
    return 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;
  }

  private setupRecognition(): void {
    const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
    this.recognition = new SpeechRecognition();
    
    this.recognition.continuous = true;
    this.recognition.interimResults = true;
    this.recognition.lang = 'ja-JP';
    this.recognition.maxAlternatives = 1;
  }

  async startListening(
    onResult: (text: string, isFinal: boolean) => void,
    onError?: (error: string) => void
  ): Promise<void> {
    if (!this.recognition) {
      throw new Error('éŸ³å£°èªè­˜ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“');
    }

    if (this.isListening) {
      return;
    }

    this.isListening = true;

    this.recognition.onresult = (event) => {
      let interimTranscript = '';
      let finalTranscript = '';

      for (let i = event.resultIndex; i < event.results.length; i++) {
        const transcript = event.results[i][0].transcript;
        
        if (event.results[i].isFinal) {
          finalTranscript += transcript;
        } else {
          interimTranscript += transcript;
        }
      }

      if (finalTranscript) {
        onResult(finalTranscript, true);
      } else if (interimTranscript) {
        onResult(interimTranscript, false);
      }
    };

    this.recognition.onerror = (event) => {
      this.isListening = false;
      onError?.(event.error);
    };

    this.recognition.onend = () => {
      this.isListening = false;
    };

    this.recognition.start();
  }

  stopListening(): void {
    if (this.recognition && this.isListening) {
      this.recognition.stop();
      this.isListening = false;
    }
  }
}

// components/audio/VoiceIdeaProcessor.tsx
export function VoiceIdeaProcessor({ onIdeaGenerated }: Props) {
  const [isSupported, setIsSupported] = useState(false);
  const [isListening, setIsListening] = useState(false);
  const [transcript, setTranscript] = useState('');
  const speechService = useRef(new SpeechRecognitionService());

  useEffect(() => {
    setIsSupported(speechService.current.isSupported());
  }, []);

  const handleStartListening = async () => {
    try {
      setIsListening(true);
      setTranscript('');
      
      await speechService.current.startListening(
        (text, isFinal) => {
          setTranscript(prev => isFinal ? prev + text + ' ' : text);
        },
        (error) => {
          console.error('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼:', error);
          setIsListening(false);
        }
      );
    } catch (error) {
      console.error('éŸ³å£°å…¥åŠ›é–‹å§‹ã‚¨ãƒ©ãƒ¼:', error);
      setIsListening(false);
    }
  };

  const handleStopListening = () => {
    speechService.current.stopListening();
    setIsListening(false);
    
    if (transcript.trim()) {
      onIdeaGenerated(transcript.trim());
    }
  };

  if (!isSupported) {
    return (
      <div className="voice-not-supported">
        <p>éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã§ã™</p>
        <p>Chromeã€Edgeã€Safariã‚’ã”åˆ©ç”¨ãã ã•ã„</p>
      </div>
    );
  }

  return (
    <div className="voice-processor">
      <button
        onClick={isListening ? handleStopListening : handleStartListening}
        className={`voice-button ${isListening ? 'listening' : ''}`}
      >
        {isListening ? 'ğŸ”´ åœæ­¢' : 'ğŸ¤ éŸ³å£°å…¥åŠ›'}
      </button>
      
      {transcript && (
        <div className="transcript">
          <p>èªè­˜ä¸­: {transcript}</p>
        </div>
      )}
    </div>
  );
}
```

### ğŸ“Š A/Bãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// services/abtest/abtestService.ts
interface ABTestVariant {
  approach: 'data-driven' | 'story-driven' | 'problem-solving';
  tone: 'analytical' | 'personal' | 'practical';
}

export async function generateABTestVersions(
  formData: FormData,
  variantCount: number = 2
): Promise<ABTestResult[]> {
  const variants: ABTestVariant[] = [
    { approach: 'data-driven', tone: 'analytical' },
    { approach: 'story-driven', tone: 'personal' },
    { approach: 'problem-solving', tone: 'practical' }
  ];

  const results: ABTestResult[] = [];

  for (let i = 0; i < variantCount; i++) {
    const variant = variants[i % variants.length];
    
    const modifiedFormData = {
      ...formData,
      additionalInstructions: `
        ${variant.approach}ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã€${variant.tone}ãªãƒˆãƒ¼ãƒ³ã§åŸ·ç­†ã—ã¦ãã ã•ã„ã€‚
        
        ${variant.approach === 'data-driven' ? 
          'çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚„å…·ä½“çš„ãªæ•°å€¤ã‚’é‡è¦–ã—ã€è«–ç†çš„ãªæ§‹æˆã§' :
          variant.approach === 'story-driven' ?
          'å€‹äººçš„ãªä½“é¨“è«‡ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ä¸­å¿ƒã«ã€æ„Ÿæƒ…ã«è¨´ãˆã‚‹å½¢ã§' :
          'å•é¡Œæèµ·ã‹ã‚‰è§£æ±ºç­–æç¤ºã¾ã§ã€å®Ÿè·µçš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é‡è¦–ã§'
        }
      `
    };

    const result = await generateSingleVersion(modifiedFormData, `Version ${i + 1}`);
    results.push(result);
  }

  return results;
}

// ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆç®—
interface ABTestMetrics {
  readabilityScore: number;
  seoScore: number;
  engagementPrediction: number;
  keywordDensity: number;
  uniquenessScore: number;
}

async function calculateMetrics(
  content: string, 
  keyword: string
): Promise<ABTestMetrics> {
  return {
    readabilityScore: calculateReadabilityScore(content),
    seoScore: calculateSEOScore(content, keyword),
    engagementPrediction: await predictEngagement(content),
    keywordDensity: calculateKeywordDensity(content, keyword),
    uniquenessScore: calculateUniquenessScore(content)
  };
}

function calculateReadabilityScore(content: string): number {
  const sentences = content.split(/[ã€‚ï¼ï¼Ÿ]/).length - 1;
  const words = content.length;
  const avgWordsPerSentence = words / sentences;
  
  // æ—¥æœ¬èªã®å ´åˆã€1æ–‡ã‚ãŸã‚Š20-30æ–‡å­—ãŒèª­ã¿ã‚„ã™ã„
  if (avgWordsPerSentence >= 20 && avgWordsPerSentence <= 30) {
    return 0.9;
  } else if (avgWordsPerSentence >= 15 && avgWordsPerSentence <= 35) {
    return 0.7;
  } else {
    return 0.5;
  }
}
```

---

## 5ï¸âƒ£ GitHubé€£æºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ğŸŒ¿ ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

#### Git Flowæ¡ç”¨
```
main (æœ¬ç•ªç’°å¢ƒ)
â”œâ”€â”€ develop (é–‹ç™ºç’°å¢ƒ)
â”‚   â”œâ”€â”€ feature/voice-input-enhancement
â”‚   â”œâ”€â”€ feature/abtest-analytics
â”‚   â”œâ”€â”€ feature/lecture-materials
â”‚   â””â”€â”€ feature/performance-optimization
â””â”€â”€ hotfix/security-patch
```

#### å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```bash
# 1. developã‹ã‚‰æ–°æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout develop
git pull origin develop
git checkout -b feature/new-functionality

# 2. æ©Ÿèƒ½é–‹ç™ºãƒ»ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½å®Ÿè£…

- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ 
- å‹å®šç¾©æ›´æ–°
- ãƒ†ã‚¹ãƒˆè¿½åŠ 

ğŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"

# 3. ãƒ—ãƒƒã‚·ãƒ¥ãƒ»ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
git push -u origin feature/new-functionality
# GitHub UIã§PRä½œæˆ

# 4. ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œãƒãƒ¼ã‚¸
# 5. developã‹ã‚‰mainã¸ã®ãƒªãƒªãƒ¼ã‚¹
```

### ğŸ“ ã‚³ãƒŸãƒƒãƒˆè¦ç´„

#### Conventional Commitsæº–æ‹ 
```
<type>(<scope>): <subject>

<body>

<footer>
```

#### å®Ÿç”¨ä¾‹
```bash
feat(audio): Web Speech APIéŸ³å£°å…¥åŠ›æ©Ÿèƒ½ã‚’è¿½åŠ 

- VoiceIdeaProcessorã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—èµ·ã“ã—å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

Closes #123
ğŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

### ğŸš€ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Type checking
        run: npm run type-check

      - name: Lint check
        run: npm run lint

      - name: Unit tests
        run: npm run test

      - name: E2E tests
        run: npm run test:e2e

      - name: Build check
        run: npm run build

  deploy:
    needs: test
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

---

## 6ï¸âƒ£ ãƒ‡ãƒãƒƒã‚° & ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ğŸ› åŠ¹æœçš„ãªãƒ‡ãƒãƒƒã‚°æ‰‹æ³•

#### æ®µéšçš„ãƒ‡ãƒãƒƒã‚°ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
```typescript
// ãƒ‡ãƒãƒƒã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼
export class DebugHelper {
  static logStep(step: string, data?: any): void {
    if (process.env.NODE_ENV === 'development') {
      console.group(`ğŸ” Debug: ${step}`);
      if (data) {
        console.log('Data:', data);
        console.log('Type:', typeof data);
        console.log('Keys:', Object.keys(data));
      }
      console.trace('Call stack');
      console.groupEnd();
    }
  }

  static measurePerformance<T>(
    label: string, 
    fn: () => T
  ): T {
    if (process.env.NODE_ENV === 'development') {
      console.time(label);
      const result = fn();
      console.timeEnd(label);
      return result;
    }
    return fn();
  }

  static logApiCall(
    url: string, 
    params: any, 
    response: any
  ): void {
    if (process.env.NODE_ENV === 'development') {
      console.group(`ğŸŒ API Call: ${url}`);
      console.log('Request params:', params);
      console.log('Response:', response);
      console.log('Status:', response.status || 'N/A');
      console.groupEnd();
    }
  }
}

// å®Ÿéš›ã®ä½¿ç”¨ä¾‹
async function generateArticle(formData: FormData) {
  DebugHelper.logStep('Article generation started', formData);
  
  try {
    const outline = await DebugHelper.measurePerformance(
      'Outline generation',
      () => createArticleOutline(formData.keyword, formData.tone, formData.audience)
    );
    
    DebugHelper.logStep('Outline created', outline);
    
    const article = await writeArticle(outline, formData.targetLength);
    DebugHelper.logStep('Article completed', { length: article.length });
    
    return article;
  } catch (error) {
    DebugHelper.logStep('Error occurred', error);
    throw error;
  }
}
```

### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ã‚³ãƒ¼ãƒ‰åˆ†å‰²æˆ¦ç•¥
```typescript
// 1. Route-based splitting (è‡ªå‹•)
// Next.js App RouterãŒè‡ªå‹•ã§å„ãƒšãƒ¼ã‚¸ã‚’åˆ†å‰²

// 2. Component-based splitting
const HeavyComponent = lazy(() => import('./HeavyComponent'));
const AnalyticsComponent = lazy(() => import('./AnalyticsComponent'));

function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <HeavyComponent />
      <AnalyticsComponent />
    </Suspense>
  );
}

// 3. Library splitting (webpackè¨­å®š)
// next.config.js
module.exports = {
  webpack: (config, { dev, isServer }) => {
    if (!dev && !isServer) {
      config.optimization.splitChunks = {
        chunks: 'all',
        cacheGroups: {
          vendor: {
            test: /[\\/]node_modules[\\/]/,
            name: 'vendors',
            chunks: 'all',
          },
          gemini: {
            test: /[\\/]node_modules[\\/]@google[\\/]genai/,
            name: 'gemini',
            chunks: 'all',
          }
        }
      };
    }
    return config;
  }
};
```

#### ãƒ¡ãƒ¢åŒ–æœ€é©åŒ–
```typescript
// é‡ã„è¨ˆç®—ã®ãƒ¡ãƒ¢åŒ–
const ExpensiveComponent = memo(function ExpensiveComponent({ 
  data, 
  onAction 
}: Props) {
  // é‡ã„è¨ˆç®—ã‚’ãƒ¡ãƒ¢åŒ–
  const expensiveValue = useMemo(() => {
    return computeComplexValue(data);
  }, [data]);

  // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ãƒ¡ãƒ¢åŒ–
  const handleAction = useCallback((id: string) => {
    onAction(id);
  }, [onAction]);

  return (
    <div>
      <div>Computed: {expensiveValue}</div>
      <button onClick={() => handleAction('test')}>
        Action
      </button>
    </div>
  );
});

// æ¡ä»¶ä»˜ããƒ¡ãƒ¢åŒ–ï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼‰
function useExpensiveCalculation(data: ComplexData) {
  return useMemo(() => {
    // ãƒ‡ãƒ¼ã‚¿ãŒè¤‡é›‘ãªå ´åˆã®ã¿ãƒ¡ãƒ¢åŒ–
    if (data.items.length > 100) {
      return computeExpensiveValue(data);
    }
    return computeSimpleValue(data);
  }, [data]);
}
```

---

## 7ï¸âƒ£ é‹ç”¨ãƒ»ç›£è¦–æˆ¦ç•¥

### ğŸ“Š ã‚¨ãƒ©ãƒ¼ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 

```typescript
// Error Boundaryå®Ÿè£…
class ErrorBoundary extends Component<
  { children: ReactNode; fallback: ComponentType<{ error: Error }> },
  { hasError: boolean; error: Error | null }
> {
  constructor(props: any) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // ã‚¨ãƒ©ãƒ¼è¿½è·¡ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
    this.logErrorToService(error, errorInfo);
  }

  private logErrorToService(error: Error, errorInfo: ErrorInfo) {
    const errorDetails = {
      message: error.message,
      stack: error.stack,
      componentStack: errorInfo.componentStack,
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent,
      url: window.location.href
    };

    // Sentryã‚„ãã®ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
    if (window.Sentry) {
      window.Sentry.captureException(error, {
        extra: errorDetails
      });
    }

    // è‡ªå‰ã®ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«é€ä¿¡
    fetch('/api/log-error', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(errorDetails)
    }).catch(console.error);
  }

  render() {
    if (this.state.hasError) {
      const FallbackComponent = this.props.fallback;
      return <FallbackComponent error={this.state.error!} />;
    }

    return this.props.children;
  }
}

// ä½¿ç”¨ä¾‹
function App() {
  return (
    <ErrorBoundary fallback={ErrorFallback}>
      <ArticleGenerator />
    </ErrorBoundary>
  );
}

function ErrorFallback({ error }: { error: Error }) {
  return (
    <div className="error-fallback">
      <h2>ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</h2>
      <details>
        <summary>æŠ€è¡“çš„ãªè©³ç´°</summary>
        <pre>{error.message}</pre>
      </details>
      <button onClick={() => window.location.reload()}>
        ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿
      </button>
    </div>
  );
}
```

### ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```typescript
// ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
export class PerformanceMonitor {
  private static metrics = new Map<string, number[]>();

  static measureAPICall<T>(
    apiName: string,
    apiCall: () => Promise<T>
  ): Promise<T> {
    const startTime = performance.now();
    
    return apiCall()
      .then(result => {
        const duration = performance.now() - startTime;
        this.recordMetric(`api_${apiName}`, duration);
        
        // é•·æ™‚é–“ã®APIå‘¼ã³å‡ºã—ã‚’è­¦å‘Š
        if (duration > 10000) { // 10ç§’ä»¥ä¸Š
          console.warn(`Slow API call detected: ${apiName} took ${duration}ms`);
        }
        
        return result;
      })
      .catch(error => {
        const duration = performance.now() - startTime;
        this.recordMetric(`api_${apiName}_error`, duration);
        throw error;
      });
  }

  static measureRender(componentName: string, renderFn: () => any) {
    const startTime = performance.now();
    const result = renderFn();
    const duration = performance.now() - startTime;
    
    this.recordMetric(`render_${componentName}`, duration);
    
    // é‡ã„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’è­¦å‘Š
    if (duration > 16) { // 16msä»¥ä¸Šï¼ˆ60FPSã‚’ä¸‹å›ã‚‹ï¼‰
      console.warn(`Slow render detected: ${componentName} took ${duration}ms`);
    }
    
    return result;
  }

  private static recordMetric(name: string, value: number) {
    const values = this.metrics.get(name) || [];
    values.push(value);
    
    // æœ€æ–°100ä»¶ã®ã¿ä¿æŒ
    if (values.length > 100) {
      values.shift();
    }
    
    this.metrics.set(name, values);
  }

  static getPerformanceReport(): Record<string, {
    avg: number;
    min: number;
    max: number;
    count: number;
  }> {
    const report: any = {};
    
    for (const [name, values] of this.metrics.entries()) {
      report[name] = {
        avg: values.reduce((a, b) => a + b, 0) / values.length,
        min: Math.min(...values),
        max: Math.max(...values),
        count: values.length
      };
    }
    
    return report;
  }
}

// React Profilerã¨ã®é€£æº
function PerformanceProfiler({ 
  name, 
  children 
}: { 
  name: string; 
  children: ReactNode 
}) {
  const onRender = useCallback((
    id: string,
    phase: 'mount' | 'update',
    actualDuration: number,
    baseDuration: number,
    startTime: number,
    commitTime: number
  ) => {
    PerformanceMonitor.recordMetric(
      `component_${id}_${phase}`,
      actualDuration
    );
  }, []);

  return (
    <Profiler id={name} onRender={onRender}>
      {children}
    </Profiler>
  );
}
```

---

## 8ï¸âƒ£ å®Ÿè·µãƒãƒ³ã‚ºã‚ªãƒ³ï¼ˆãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”¨ï¼‰

### ğŸ¯ ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ª

#### 1. Claude Codeæ´»ç”¨å®Ÿæ¼”ï¼ˆ5åˆ†ï¼‰
```
å®Ÿæ¼”å†…å®¹:
1. æ–°æ©Ÿèƒ½è¦æ±‚ã‚’Claude Codeã«æŠ•ã’ã‚‹
   ã€Œè¨˜äº‹ç”Ÿæˆã®é€²æ—ç‡ã‚’%ã§è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã„ã€

2. å‹å®šç¾©ã‹ã‚‰å®Ÿè£…ã¾ã§ä¸€æ°—ã«ç”Ÿæˆ
   - ProgressBarã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - é€²æ—è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ

3. ãƒã‚°ä¿®æ­£ãƒ‡ãƒ¢
   - æ„å›³çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚‹
   - Claude Codeã§åŸå› åˆ†æãƒ»ä¿®æ­£æ¡ˆæç¤º
```

#### 2. GitHubé€£æºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆ5åˆ†ï¼‰
```bash
# å®Ÿéš›ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
git checkout -b feature/progress-indicator
# Claude Codeç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: è¨˜äº‹ç”Ÿæˆé€²æ—è¡¨ç¤ºæ©Ÿèƒ½ã‚’è¿½åŠ 

ğŸ¤– Generated with Claude Code"
git push -u origin feature/progress-indicator
# GitHub UIã§PRä½œæˆç”»é¢ã‚’è¡¨ç¤º
```

#### 3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½è¿½åŠ ï¼ˆ10åˆ†ï¼‰
```typescript
// ãƒ©ã‚¤ãƒ–ã§å®Ÿè£…ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹
interface ProgressIndicatorProps {
  currentStep: ProcessStep;
  totalSteps: number;
  isGenerating: boolean;
}

export function ProgressIndicator({ 
  currentStep, 
  totalSteps, 
  isGenerating 
}: ProgressIndicatorProps) {
  // Claude Codeã¨ä¸€ç·’ã«å®Ÿè£…
  const progress = calculateProgress(currentStep, totalSteps);
  
  return (
    <div className="progress-container">
      <div className="progress-bar">
        <div 
          className="progress-fill"
          style={{ width: `${progress}%` }}
        />
      </div>
      <span className="progress-text">
        {isGenerating ? currentStep : 'å¾…æ©Ÿä¸­'}
      </span>
    </div>
  );
}

function calculateProgress(step: ProcessStep, total: number): number {
  const stepIndex = Object.values(ProcessStep).indexOf(step);
  return Math.round((stepIndex / total) * 100);
}
```

### ğŸ’¡ å‚åŠ è€…å‘ã‘ãƒãƒ£ãƒ¬ãƒ³ã‚¸

```
ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—èª²é¡Œ:
â–¡ ä»Šå›ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’fork
â–¡ è‡ªåˆ†ãªã‚Šã®æ©Ÿèƒ½ã‚’1ã¤è¿½åŠ ï¼ˆä¾‹: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã€éŸ³å£°é€Ÿåº¦èª¿æ•´ï¼‰
â–¡ GitHub Issuesã§è³ªå•ã‚„æ”¹å–„ææ¡ˆã‚’æŠ•ç¨¿
â–¡ Claude Codeã‚’ä½¿ã£ãŸé–‹ç™ºä½“é¨“ã‚’ã‚·ã‚§ã‚¢

æ¬¡å›ã¾ã§ã®å®¿é¡Œ:
â–¡ å®Ÿéš›ã«Claude Codeã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’1ã¤ä½œæˆ
â–¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’1ã¤å®Ÿè£…
â–¡ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’æ”¹å–„
```

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯ & ç¶™ç¶šå­¦ç¿’

### ğŸ“š å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Next.js 14 Documentation](https://nextjs.org/docs)
- [React 19 Documentation](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Claude Code Documentation](https://claude.ai/code)

### ğŸ› ï¸ é–‹ç™ºãƒ„ãƒ¼ãƒ«
- [Vercel](https://vercel.com/) - ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
- [Supabase](https://supabase.com/) - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
- [Sentry](https://sentry.io/) - ã‚¨ãƒ©ãƒ¼ç›£è¦–
- [Lighthouse](https://developers.google.com/web/tools/lighthouse) - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£æŸ»

### ğŸ“ ç¶™ç¶šå­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹
- [React Patterns](https://reactpatterns.com/) - Reactãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
- [Web.dev](https://web.dev/) - Webãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [TypeScript Deep Dive](https://basarat.gitbook.io/typescript/) - TypeScriptè©³è§£
- [Next.js Learn](https://nextjs.org/learn) - Next.jså…¬å¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

---

**ğŸš€ æœ¬æ—¥ã®ç›®æ¨™é”æˆ: Claude Code Ã— Next.js 14 ã§åŠ¹ç‡çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã‚ˆã†ï¼**

### ğŸ“ è³ªå•ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—
- **GitHub Issues**: æŠ€è¡“çš„ãªè³ªå•ã‚„æ”¹å–„ææ¡ˆ
- **Discord**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªè³ªç–‘å¿œç­”
- **æ¬¡å›äºˆå‘Š**: Phase 2æ©Ÿèƒ½ï¼ˆå¤–éƒ¨APIçµ±åˆãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å”èª¿ï¼‰ã®å®Ÿè£…ç·¨

---

*ğŸ¤– ã“ã®è¬›ç¾©è³‡æ–™ã¯Claude Codeã‚’æ´»ç”¨ã—ã¦ä½œæˆã•ã‚Œã¾ã—ãŸ*

### ğŸ¯ ç›®çš„ãƒ»ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

| é …ç›® | å†…å®¹ |
|------|------|
| **ç›®çš„** | SEOã«å¼·ããƒ»èª­ã¾ã‚Œã‚‹noteè¨˜äº‹ã®è‡ªå‹•ç”Ÿæˆ |
| **ç‰¹å¾´** | AIã£ã½ããªã„è‡ªç„¶ãªæ—¥æœ¬èªè¡¨ç¾ |
| **ç¯„å›²** | æ§‹æˆâ†’åŸ·ç­†â†’ç”»åƒâ†’SNS ã®ä¸€æ°—é€šè²«è‡ªå‹•åŒ– |

### ğŸ—ï¸ Phase 1.5 å®Œäº†çŠ¶æ³

- âœ… **çµ±åˆãƒªã‚µãƒ¼ãƒæ©Ÿèƒ½**: Google Search + noteåˆ†æ + SNSãƒˆãƒ¬ãƒ³ãƒ‰
- âœ… **éŸ³å£°å…¥åŠ›å¯¾å¿œ**: Web Speech API ã§ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢å…¥åŠ›
- âœ… **A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½**: è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç”Ÿæˆãƒ»æ¯”è¼ƒ
- âœ… **Next.js 14 App Routerç§»è¡Œ**: SSRæœ€é©åŒ–ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

### ğŸš€ æœ¬æ—¥ã®å®Ÿè£…ãƒ†ãƒ¼ãƒ

1. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ·±æ˜ã‚Š**: è¨­è¨ˆæ€æƒ³ãƒ»æŠ€è¡“é¸å®šç†ç”±
2. **é–‹ç™ºåŠ¹ç‡åŒ–ã®ãƒã‚¦ãƒã‚¦**: å‹å®‰å…¨æ€§ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
3. **å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ç´¹ä»‹**: å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js 14)

#### App Routeræ§‹é€ 
```
src/app/
â”œâ”€â”€ page.tsx          # ãƒ¡ã‚¤ãƒ³UI
â”œâ”€â”€ layout.tsx        # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â””â”€â”€ api/              # APIãƒ«ãƒ¼ãƒˆ
    â””â”€â”€ tavily-search/
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ
```
src/components/
â”œâ”€â”€ forms/            # å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
â”œâ”€â”€ display/          # çµæœè¡¨ç¤º
â”œâ”€â”€ feedback/         # é€²æ—è¡¨ç¤º
â””â”€â”€ providers/        # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
```

#### SSR/CSRæœ€é©åŒ–
- **Dynamic Importæ´»ç”¨**: éŸ³å£°èªè­˜ãªã©ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå°‚ç”¨æ©Ÿèƒ½
- **Client Providersåˆ†é›¢**: SSRã‚¨ãƒ©ãƒ¼å›é¿
- **æ®µéšçš„ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ğŸ§  AIã‚µãƒ¼ãƒ“ã‚¹å±¤

#### Gemini 2.5 Flashçµ±åˆ
```typescript
// services/ai/geminiService.ts
export async function createArticleOutline(
  keyword: string, 
  tone: Tone, 
  audience: Audience
): Promise<ArticleOutline>

export async function writeArticle(
  outline: ArticleOutline, 
  targetLength: number
): Promise<string>

export async function generateImage(
  prompt: string
): Promise<string>
```

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–
- **ã‚¢ãƒ³ãƒAIãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°è¦å‰‡**: ç¿»è¨³èª¿è¡¨ç¾ã®æ’é™¤
- **è‡ªç„¶ãªæ—¥æœ¬èªè¡¨ç¾**: ã€Œã€œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€â†’ã€Œã€œã§ãã¾ã™ã€
- **ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãªä½“é¨“è«‡çµ„ã¿è¾¼ã¿**: äººé–“ã‚‰ã—ã„æ¸©ã‹ã¿

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
async function withRetry<T>(
  operation: () => Promise<T>,
  maxRetries: number = 2
): Promise<T> {
  // æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã§ãƒªãƒˆãƒ©ã‚¤
}
```

### ğŸ” ãƒªã‚µãƒ¼ãƒã‚¨ãƒ³ã‚¸ãƒ³

- **Google Search APIçµ±åˆ**: SEOåˆ†æãƒ»ç«¶åˆèª¿æŸ»
- **noteãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†æ**: äººæ°—è¨˜äº‹ãƒˆãƒ¬ãƒ³ãƒ‰
- **SNSãƒˆãƒ¬ãƒ³ãƒ‰èª¿æŸ»**: X(Twitter)ã§ã®è©±é¡Œæ€§
- **Tavily APIãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯**: æƒ…å ±ã®æ­£ç¢ºæ€§ç¢ºä¿

### ğŸ“± ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é€£æº

#### X(Twitter)æŠ•ç¨¿ç”Ÿæˆ
```typescript
export interface XPostGenerationResult {
  shortPosts: XPost[];      // 140æ–‡å­— Ã— 5ãƒ‘ã‚¿ãƒ¼ãƒ³
  longPosts: XPost[];       // 300-500æ–‡å­— Ã— 2ãƒ‘ã‚¿ãƒ¼ãƒ³
  threadPosts: XThread[];   // 5-7ãƒ„ã‚¤ãƒ¼ãƒˆ Ã— è¤‡æ•°å½¢å¼
}
```

#### ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆäºˆæ¸¬
- å„æŠ•ç¨¿ã®äºˆæƒ³ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤åˆ¥ã®æœ€é©åŒ–

### ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†

#### Supabase (ãƒ¡ã‚¤ãƒ³DB)
- **PostgreSQL + Pgvector**: å°†æ¥ã®RAGæ©Ÿèƒ½ç”¨
- **Row Level Security**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- **å±¥æ­´ãƒ»åˆ†æãƒ‡ãƒ¼ã‚¿ä¿å­˜**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡

#### LocalStorage (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- Supabaseæœªè¨­å®šæ™‚ã®ä»£æ›¿

---

## 3. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ğŸ¯ ã‚³ã‚¢æŠ€è¡“

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|-----------|------|
| **Next.js** | 15.1.0 | App Routerãƒ»SSR |
| **React** | 19.2.0 | UIæ§‹ç¯‰ |
| **TypeScript** | 5.8.2 | å‹å®‰å…¨æ€§ç¢ºä¿ |
| **Tailwind CSS** | 3.4.16 | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |

### ğŸ¤– AIãƒ»å¤–éƒ¨API

```json
{
  "@google/genai": "^1.23.0",           // Gemini AI
  "@supabase/supabase-js": "^2.75.0",   // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  "Web Speech API": "æ¨™æº–",              // éŸ³å£°èªè­˜
  "Tavily Search API": "å¤–éƒ¨"            // ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯
}
```

### ğŸ“¦ UIãƒ»æ©Ÿèƒ½ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- **react-markdown**: Markdownè¡¨ç¤ºãƒ»ç·¨é›†
- **mermaid**: å›³è§£ç”Ÿæˆ
- **recharts**: åˆ†æçµæœã®ã‚°ãƒ©ãƒ•è¡¨ç¤º
- **yjs**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å”èª¿ç·¨é›† (Phase 2)

### ğŸ”¨ é–‹ç™ºãƒ»ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«

- **@playwright/test**: E2Eãƒ†ã‚¹ãƒˆ
- **ESLint + Next.jsè¨­å®š**: ã‚³ãƒ¼ãƒ‰å“è³ª
- **Webpackæœ€é©åŒ–è¨­å®š**: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›

---

## 4. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### ğŸ“‚ å…¨ä½“æ§‹é€ 
```
src/
â”œâ”€â”€ app/              # Next.js App Router
â”œâ”€â”€ components/       # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ services/         # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ types/           # å‹å®šç¾©
â”œâ”€â”€ config/          # è¨­å®šç®¡ç†
â”œâ”€â”€ hooks/           # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ styles/          # ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
```

### ğŸ“‚ è©³ç´°æ§‹é€ 

#### components/ - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```
components/
â”œâ”€â”€ forms/           # å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”œâ”€â”€ InputGroup.tsx
â”‚   â””â”€â”€ CollapsibleSection.tsx
â”œâ”€â”€ display/         # çµæœè¡¨ç¤º
â”‚   â”œâ”€â”€ OutputDisplay.tsx
â”‚   â””â”€â”€ XPostDisplay.tsx
â”œâ”€â”€ feedback/        # é€²æ—ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
â”‚   â””â”€â”€ StepIndicator.tsx
â”œâ”€â”€ audio/           # éŸ³å£°å…¥åŠ›
â”‚   â””â”€â”€ VoiceIdeaProcessor.tsx
â”œâ”€â”€ history/         # å±¥æ­´ç®¡ç†
â”‚   â””â”€â”€ HistoryPanel.tsx
â””â”€â”€ providers/       # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
    â””â”€â”€ ClientProviders.tsx
```

#### services/ - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
```
services/
â”œâ”€â”€ ai/              # Gemini AIçµ±åˆ
â”‚   â””â”€â”€ geminiService.ts
â”œâ”€â”€ research/        # ãƒªã‚µãƒ¼ãƒã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ searchService.ts
â”‚   â”œâ”€â”€ noteAnalyzer.ts
â”‚   â””â”€â”€ trendAnalyzer.ts
â”œâ”€â”€ social/          # SNSæŠ•ç¨¿ç”Ÿæˆ
â”‚   â””â”€â”€ xPostGenerator.ts
â”œâ”€â”€ database/        # Supabaseé€£æº
â”‚   â”œâ”€â”€ supabaseClient.ts
â”‚   â””â”€â”€ historyService.ts
â”œâ”€â”€ audio/           # éŸ³å£°èªè­˜
â”‚   â””â”€â”€ speechRecognitionService.ts
â””â”€â”€ abtest/          # A/Bãƒ†ã‚¹ãƒˆ
    â””â”€â”€ abtestService.ts
```

#### types/ - å‹å®šç¾©
```
types/
â”œâ”€â”€ index.ts         # å…±é€šå‹ãƒ»å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ article.types.ts # è¨˜äº‹é–¢é€£
â”œâ”€â”€ api.types.ts     # APIé–¢é€£
â”œâ”€â”€ social.types.ts  # SNSé–¢é€£
â”œâ”€â”€ speech.types.ts  # éŸ³å£°èªè­˜é–¢é€£
â””â”€â”€ abtest.types.ts  # A/Bãƒ†ã‚¹ãƒˆé–¢é€£
```

---

## 5. é–‹ç™ºåŠ¹ç‡åŒ–ãƒã‚¦ãƒã‚¦

### ğŸ¯ å‹å®‰å…¨æ€§ã®ç¢ºä¿

#### å³å¯†ãªTypeScriptè¨­å®š
```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noEmit": true,
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true
  }
}
```

#### ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥å‹å®šç¾©åˆ†å‰²
```typescript
// types/article.types.ts
export interface ArticleOutline {
  title: string;
  metaDescription: string;
  sections: Section[];
  faq: FAQItem[];
}

// types/social.types.ts
export interface XPost {
  content: string;
  hashtags: string[];
  engagementPrediction: 'high' | 'medium' | 'low';
}
```

#### API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚¬ãƒ¼ãƒ‰
```typescript
function isValidArticleOutline(data: unknown): data is ArticleOutline {
  return typeof data === 'object' && 
         data !== null && 
         'title' in data && 
         'sections' in data;
}
```

### ğŸ”„ çŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

#### useStateãƒ•ãƒƒã‚¯æ´»ç”¨
```typescript
const [currentStep, setCurrentStep] = useState<ProcessStep>(ProcessStep.IDLE);
const [isGenerating, setIsGenerating] = useState(false);
const [output, setOutput] = useState<FinalOutput | null>(null);
```

#### Custom HooksæŠ½å‡º
```typescript
// hooks/useArticleGeneration.ts
export function useArticleGeneration() {
  const [state, setState] = useState<GenerationState>(...);
  
  const generateArticle = useCallback(async (formData: FormData) => {
    // ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
  }, []);
  
  return { state, generateArticle };
}
```

#### Provideråˆ†é›¢æˆ¦ç•¥
```typescript
// components/providers/ClientProviders.tsx
'use client';
export function ClientProviders({ children }: { children: React.ReactNode }) {
  return (
    <ThemeProvider>
      <AudioProvider>
        {children}
      </AudioProvider>
    </ThemeProvider>
  );
}
```

### ğŸ¨ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

#### å˜ä¸€è²¬ä»»ã®åŸå‰‡
```typescript
// âŒ æ‚ªã„ä¾‹: è¤‡æ•°ã®è²¬ä»»
function ArticleGenerator() {
  // ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç† + APIå‘¼ã³å‡ºã— + çµæœè¡¨ç¤º
}

// âœ… è‰¯ã„ä¾‹: è²¬ä»»åˆ†é›¢
function InputForm({ onSubmit }: { onSubmit: (data: FormData) => void }) {}
function StepIndicator({ currentStep }: { currentStep: ProcessStep }) {}
function OutputDisplay({ output }: { output: FinalOutput }) {}
```

#### Props ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
```typescript
interface InputGroupProps {
  keyword: string;
  onKeywordChange: (value: string) => void;
  tone: Tone;
  onToneChange: (value: Tone) => void;
  audience: Audience;
  onAudienceChange: (value: Audience) => void;
}
```

#### å†åˆ©ç”¨å¯èƒ½ãªUIéƒ¨å“åŒ–
```typescript
// components/forms/CollapsibleSection.tsx
interface CollapsibleSectionProps {
  title: string;
  children: React.ReactNode;
  defaultOpen?: boolean;
}

export function CollapsibleSection({ 
  title, 
  children, 
  defaultOpen = false 
}: CollapsibleSectionProps) {
  // æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ãªã‚»ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè£…
}
```

### ğŸš¦ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### æ®µéšçš„ã‚¨ãƒ©ãƒ¼å‡¦ç†
```typescript
try {
  const outline = await createArticleOutline(keyword, tone, audience);
  setCurrentStep(ProcessStep.WRITING);
  
  const article = await writeArticle(outline, targetLength);
  setCurrentStep(ProcessStep.GENERATING_IMAGE);
  
} catch (error) {
  if (error instanceof APIError) {
    // APIå›ºæœ‰ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
  } else if (error instanceof ValidationError) {
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼å‡¦ç†
  } else {
    // äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼å‡¦ç†
  }
  setCurrentStep(ProcessStep.ERROR);
}
```

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```typescript
function getErrorMessage(error: Error): string {
  if (error.message.includes('API_KEY')) {
    return 'APIã‚­ãƒ¼ã®è¨­å®šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚.env.localãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
  }
  if (error.message.includes('RATE_LIMIT')) {
    return 'APIåˆ©ç”¨åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚å°‘ã—æ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚';
  }
  return 'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
}
```

#### å¾©æ—§å¯èƒ½ãªå‡¦ç†è¨­è¨ˆ
```typescript
async function withRetry<T>(
  operation: () => Promise<T>,
  maxRetries: number = 2,
  baseDelay: number = 500
): Promise<T> {
  for (let attempt = 0; attempt <= maxRetries; attempt++) {
    try {
      return await operation();
    } catch (error) {
      if (attempt === maxRetries) throw error;
      
      const delay = baseDelay * Math.pow(2, attempt);
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
  throw new Error('Max retries exceeded');
}
```

### ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Dynamic Import (ã‚³ãƒ¼ãƒ‰åˆ†å‰²)
```typescript
// éŸ³å£°èªè­˜ã¯å¿…è¦æ™‚ã®ã¿ãƒ­ãƒ¼ãƒ‰
const VoiceIdeaProcessor = dynamic(
  () => import('@/components/audio/VoiceIdeaProcessor').then(mod => ({ 
    default: mod.VoiceIdeaProcessor 
  })),
  { ssr: false }
);

// ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆã‚‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå°‚ç”¨
const ThemeToggle = dynamic(
  () => import('@/components/theme/ThemeToggle'),
  { ssr: false }
);
```

#### ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–
```javascript
// next.config.js
webpack: (config, { dev, isServer }) => {
  if (!dev && !isServer) {
    config.optimization.splitChunks = {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        },
        gemini: {
          test: /[\\/]node_modules[\\/]@google[\\/]genai/,
          name: 'gemini',
          chunks: 'all',
        },
      },
    };
  }
  return config;
}
```

#### ç”»åƒãƒ»ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–
```javascript
// next.config.js
images: {
  formats: ['image/webp', 'image/avif'],
  deviceSizes: [640, 750, 828, 1080, 1200, 1920],
  imageSizes: [16, 32, 48, 64, 96, 128, 256],
}
```

---

## 6. å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸª AIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè£…

#### ã‚¹ãƒ†ãƒƒãƒ—ç®¡ç† (ProcessStep enum)
```typescript
export enum ProcessStep {
  IDLE = 'IDLE',
  RESEARCH = 'çµ±åˆãƒªã‚µãƒ¼ãƒä¸­...',
  ANALYZING = 'SEOåˆ†æä¸­...',
  OUTLINING = 'è¨˜äº‹æ§‹æˆæ¡ˆã®ä½œæˆä¸­...',
  WRITING = 'è¨˜äº‹æœ¬æ–‡ã®åŸ·ç­†ä¸­...',
  FACT_CHECKING = 'ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯ä¸­...',
  GENERATING_DIAGRAMS = 'å›³è§£ç”Ÿæˆä¸­...',
  GENERATING_IMAGE = 'ç”»åƒç”Ÿæˆä¸­...',
  GENERATING_X_POSTS = 'Xå‘ŠçŸ¥æ–‡ç”Ÿæˆä¸­...',
  DONE = 'å®Œäº†',
  ERROR = 'ã‚¨ãƒ©ãƒ¼',
}
```

#### é€²æ—è¡¨ç¤ºã®æœ€é©åŒ–
```typescript
// components/feedback/StepIndicator.tsx
export default function StepIndicator({ currentStep }: { currentStep: ProcessStep }) {
  const getStatusImage = (step: ProcessStep) => {
    const statusImages = {
      [ProcessStep.RESEARCH]: '/images/status/research.png',
      [ProcessStep.ANALYZING]: '/images/status/analyzing.png',
      [ProcessStep.WRITING]: '/images/status/writing.png',
      // ...
    };
    return statusImages[step] || '/images/status/default.png';
  };

  return (
    <div className="step-indicator">
      <img src={getStatusImage(currentStep)} alt={currentStep} />
      <p>{currentStep}</p>
    </div>
  );
}
```

#### ã‚¨ãƒ©ãƒ¼æ™‚ã®å¾©æ—§å‡¦ç†
```typescript
const handleGenerateArticle = async (formData: FormData) => {
  try {
    setIsGenerating(true);
    setCurrentStep(ProcessStep.RESEARCH);
    
    // å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’é †æ¬¡å®Ÿè¡Œ
    for (const step of GENERATION_STEPS) {
      await executeStep(step, formData);
    }
    
    setCurrentStep(ProcessStep.DONE);
  } catch (error) {
    console.error('Generation failed:', error);
    setCurrentStep(ProcessStep.ERROR);
    setErrorMessage(getErrorMessage(error));
  } finally {
    setIsGenerating(false);
  }
};
```

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–æ‰‹æ³•
```typescript
const ANTI_AI_WRITING_RULES = `
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦è‡ªç„¶ãªæ—¥æœ¬èªã§åŸ·ç­†ã—ã¦ãã ã•ã„ï¼š

ã€ç¦æ­¢è¡¨ç¾ã€‘
- ç¿»è¨³èª¿: "ã€œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™" â†’ "ã€œã§ãã¾ã™"
- æ©Ÿæ¢°çš„: "ã€œã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™" â†’ ç›´æ¥çš„ãªå†…å®¹
- ç¡¬ã„è¡¨ç¾: "ã‚ãªãŸã¯ã€œ" â†’ è‡ªç„¶ãªå‘¼ã³ã‹ã‘

ã€å¿…é ˆè¦ç´ ã€‘
- å€‹äººçš„ãªä½“é¨“è«‡ã‚’1ã¤ä»¥ä¸Šå«ã‚ã‚‹
- "å®Ÿã¯..."ã€"æ­£ç›´ãªã¨ã“ã‚..."ãªã©ã®è‡ªç„¶ãªè¡¨ç¾
- å…·ä½“çš„ãªä¾‹ã‚„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰
- èª­è€…ã¨ã®å…±æ„Ÿãƒã‚¤ãƒ³ãƒˆ
`;

const PERSONAL_EXPERIENCE_PATTERNS = [
  "ç§è‡ªèº«ã‚‚åˆã‚ã¦{ãƒ†ãƒ¼ãƒ}ã«æŒ‘æˆ¦ã—ãŸæ™‚ã€{å…·ä½“çš„ãªå›°é›£}ã§èº“ã„ã¦ã—ã¾ã„...",
  "å‹äººã‹ã‚‰èã„ãŸè©±ã§ã™ãŒã€{çŠ¶æ³èª¬æ˜}ã®æ™‚ã«{ä½“é¨“å†…å®¹}ã ã£ãŸãã†ã§ã™...",
  "ä»¥å‰è·å ´ã§{ãƒ†ãƒ¼ãƒ}ã®æ¡ˆä»¶ã‚’æ‹…å½“ã—ãŸéš›ã€{å­¦ã‚“ã ã“ã¨}ãŒå°è±¡çš„ã§ã—ãŸ...",
];
```

### ğŸµ éŸ³å£°å…¥åŠ›å®Ÿè£…

#### Web Speech APIæ´»ç”¨
```typescript
// services/audio/speechRecognitionService.ts
export class SpeechRecognitionService {
  private recognition: SpeechRecognition | null = null;

  constructor() {
    if (typeof window !== 'undefined' && 'webkitSpeechRecognition' in window) {
      this.recognition = new window.webkitSpeechRecognition();
      this.setupRecognition();
    }
  }

  private setupRecognition() {
    if (!this.recognition) return;

    this.recognition.continuous = true;
    this.recognition.interimResults = true;
    this.recognition.lang = 'ja-JP';
  }

  async startListening(onResult: (text: string) => void): Promise<void> {
    if (!this.recognition) {
      throw new Error('Speech recognition not supported');
    }

    this.recognition.onresult = (event) => {
      let finalTranscript = '';
      for (let i = event.resultIndex; i < event.results.length; i++) {
        if (event.results[i].isFinal) {
          finalTranscript += event.results[i][0].transcript;
        }
      }
      if (finalTranscript) {
        onResult(finalTranscript);
      }
    };

    this.recognition.start();
  }
}
```

#### ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§å¯¾å¿œ
```typescript
// components/audio/VoiceIdeaProcessor.tsx
export function VoiceIdeaProcessor({ onIdeaGenerated }: Props) {
  const [isSupported, setIsSupported] = useState(false);
  const [isListening, setIsListening] = useState(false);

  useEffect(() => {
    // ãƒ–ãƒ©ã‚¦ã‚¶ã‚µãƒãƒ¼ãƒˆç¢ºèª
    const checkSupport = () => {
      const hasWebkitSpeech = 'webkitSpeechRecognition' in window;
      const hasSpeech = 'SpeechRecognition' in window;
      setIsSupported(hasWebkitSpeech || hasSpeech);
    };

    checkSupport();
  }, []);

  if (!isSupported) {
    return (
      <div className="voice-not-supported">
        <p>ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
        <p>Chromeã€Edgeã€Safariã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
      </div>
    );
  }

  // éŸ³å£°èªè­˜UIå®Ÿè£…...
}
```

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—èµ·ã“ã—
```typescript
const handleVoiceInput = useCallback(async () => {
  setIsListening(true);
  setTranscript('');

  try {
    await speechService.startListening((text) => {
      setTranscript(prev => prev + text);
      
      // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºæ›´æ–°
      if (text.length > 50) {
        // ä¸€å®šæ–‡å­—æ•°ã§åŒºåˆ‡ã£ã¦å‡¦ç†
        processTranscriptChunk(text);
      }
    });
  } catch (error) {
    console.error('Voice input failed:', error);
    setError('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  } finally {
    setIsListening(false);
  }
}, []);
```

#### éŸ³å£°ã‹ã‚‰ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢æŠ½å‡º
```typescript
async function extractIdeasFromVoice(transcript: string): Promise<string[]> {
  const prompt = `
ä»¥ä¸‹ã®éŸ³å£°å…¥åŠ›ã‹ã‚‰è¨˜äº‹ã®ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ï¼š

éŸ³å£°å…¥åŠ›: "${transcript}"

ä»¥ä¸‹ã®å½¢å¼ã§3-5å€‹ã®ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ã‚’ææ¡ˆã—ã¦ãã ã•ã„ï¼š
1. å…·ä½“çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
2. æƒ³å®šã•ã‚Œã‚‹èª­è€…å±¤
3. è¨˜äº‹ã®æ–¹å‘æ€§

å‡ºåŠ›å½¢å¼: JSONé…åˆ—
`;

  const response = await geminiService.generateText(prompt);
  return JSON.parse(response);
}
```

### ğŸ“Š A/Bãƒ†ã‚¹ãƒˆå®Ÿè£…

#### è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç”Ÿæˆ
```typescript
// services/abtest/abtestService.ts
export async function generateABTestVersions(
  formData: FormData,
  versionCount: number = 2
): Promise<ABTestResult[]> {
  const variations = [
    { approach: 'data-driven', tone: 'analytical' },
    { approach: 'story-driven', tone: 'personal' },
    { approach: 'problem-solving', tone: 'practical' },
  ];

  const results: ABTestResult[] = [];

  for (let i = 0; i < versionCount; i++) {
    const variation = variations[i % variations.length];
    const modifiedFormData = {
      ...formData,
      additionalInstructions: `${variation.approach}ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§${variation.tone}ãªãƒˆãƒ¼ãƒ³ã§åŸ·ç­†`
    };

    const result = await generateSingleVersion(modifiedFormData, `Version ${i + 1}`);
    results.push(result);
  }

  return results;
}
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ
```typescript
interface ABTestMetrics {
  readabilityScore: number;      // èª­ã¿ã‚„ã™ã•ã‚¹ã‚³ã‚¢
  seoScore: number;             // SEOã‚¹ã‚³ã‚¢
  engagementPrediction: number; // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆäºˆæ¸¬
  keywordDensity: number;       // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¯†åº¦
  uniquenessScore: number;      // ç‹¬è‡ªæ€§ã‚¹ã‚³ã‚¢
}

async function analyzeVersionPerformance(
  content: string,
  keyword: string
): Promise<ABTestMetrics> {
  // å„ç¨®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’è¨ˆç®—
  const readabilityScore = calculateReadability(content);
  const seoScore = analyzeSEOFactors(content, keyword);
  const engagementPrediction = predictEngagement(content);
  
  return {
    readabilityScore,
    seoScore,
    engagementPrediction,
    keywordDensity: calculateKeywordDensity(content, keyword),
    uniquenessScore: calculateUniqueness(content),
  };
}
```

#### æœ€é©åŒ–æŒ‡æ¨™ã®æ¸¬å®š
```typescript
export function compareABTestVersions(results: ABTestResult[]): ABTestComparison {
  const comparison: ABTestComparison = {
    winner: null,
    metrics: {},
    recommendations: []
  };

  // å„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§ã®æœ€é«˜ã‚¹ã‚³ã‚¢ç‰ˆã‚’ç‰¹å®š
  const metricWinners = {
    readability: getBestByMetric(results, 'readabilityScore'),
    seo: getBestByMetric(results, 'seoScore'),
    engagement: getBestByMetric(results, 'engagementPrediction'),
  };

  // ç·åˆçš„ãªå‹è€…ã‚’æ±ºå®š
  comparison.winner = determineOverallWinner(results, metricWinners);
  
  // æ”¹å–„ææ¡ˆã‚’ç”Ÿæˆ
  comparison.recommendations = generateRecommendations(results, metricWinners);

  return comparison;
}
```

### ğŸ” çµ±åˆãƒªã‚µãƒ¼ãƒå®Ÿè£…

#### è¤‡æ•°APIä¸¦åˆ—å‡¦ç†
```typescript
// services/research/integratedResearch.ts
export async function performIntegratedResearch(keyword: string): Promise<ResearchResult> {
  try {
    // ä¸¦åˆ—ã§è¤‡æ•°ã®ãƒªã‚µãƒ¼ãƒã‚’å®Ÿè¡Œ
    const [
      searchResults,
      noteAnalysis,
      trendData,
      factCheckData
    ] = await Promise.allSettled([
      analyzeSearchResults(keyword),
      analyzeNoteContent(keyword),
      analyzeTrends(keyword),
      performFactCheck(keyword)
    ]);

    // çµæœã‚’çµ±åˆ
    return integrateResearchResults({
      search: searchResults.status === 'fulfilled' ? searchResults.value : null,
      note: noteAnalysis.status === 'fulfilled' ? noteAnalysis.value : null,
      trends: trendData.status === 'fulfilled' ? trendData.value : null,
      factCheck: factCheckData.status === 'fulfilled' ? factCheckData.value : null,
    });
  } catch (error) {
    console.error('Integrated research failed:', error);
    throw new Error('ãƒªã‚µãƒ¼ãƒå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
  }
}
```

#### ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ»æ­£è¦åŒ–
```typescript
function integrateResearchResults(results: RawResearchResults): ResearchResult {
  const integrated: ResearchResult = {
    keyword: results.search?.keyword || '',
    insights: [],
    competitorAnalysis: [],
    trendingTopics: [],
    factCheckedClaims: [],
    seoRecommendations: [],
  };

  // Google Searchçµæœã‹ã‚‰æ´å¯Ÿã‚’æŠ½å‡º
  if (results.search) {
    integrated.insights.push(...extractSearchInsights(results.search));
    integrated.competitorAnalysis = analyzeCompetitors(results.search.results);
  }

  // noteãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†æ
  if (results.note) {
    integrated.insights.push(...extractNoteInsights(results.note));
  }

  // ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
  if (results.trends) {
    integrated.trendingTopics = results.trends.topics;
  }

  // ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯çµæœ
  if (results.factCheck) {
    integrated.factCheckedClaims = results.factCheck.verifiedClaims;
  }

  return integrated;
}
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
```typescript
class ResearchCache {
  private cache = new Map<string, CachedResult>();
  private readonly TTL = 30 * 60 * 1000; // 30åˆ†

  async get(key: string): Promise<ResearchResult | null> {
    const cached = this.cache.get(key);
    if (!cached) return null;

    if (Date.now() - cached.timestamp > this.TTL) {
      this.cache.delete(key);
      return null;
    }

    return cached.data;
  }

  set(key: string, data: ResearchResult): void {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }

  // LRUã‚¹ã‚¿ã‚¤ãƒ«ã§ãƒ¡ãƒ¢ãƒªç®¡ç†
  private evictOldEntries(): void {
    if (this.cache.size > 100) {
      const oldestKey = this.cache.keys().next().value;
      this.cache.delete(oldestKey);
    }
  }
}
```

### ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

#### ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆè¨­è¨ˆ
```css
/* styles/globals.css */
.input-group {
  @apply w-full px-4 py-2;
}

@media (min-width: 768px) {
  .input-group {
    @apply px-6 py-3;
  }
}

@media (min-width: 1024px) {
  .input-group {
    @apply px-8 py-4;
  }
}
```

#### ã‚¿ãƒƒãƒæ“ä½œå¯¾å¿œ
```typescript
// hooks/useTouch.ts
export function useTouch() {
  const [touchStart, setTouchStart] = useState<TouchEvent | null>(null);
  
  const handleTouchStart = (e: TouchEvent) => {
    setTouchStart(e);
  };

  const handleTouchEnd = (e: TouchEvent) => {
    if (!touchStart) return;

    const touchEnd = e.changedTouches[0];
    const touchStartPoint = touchStart.touches[0];
    
    const diffX = touchStartPoint.clientX - touchEnd.clientX;
    const diffY = touchStartPoint.clientY - touchEnd.clientY;

    // ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼åˆ¤å®š
    if (Math.abs(diffX) > Math.abs(diffY)) {
      if (diffX > 50) {
        // å·¦ã‚¹ãƒ¯ã‚¤ãƒ—
      } else if (diffX < -50) {
        // å³ã‚¹ãƒ¯ã‚¤ãƒ—
      }
    }
  };

  return { handleTouchStart, handleTouchEnd };
}
```

#### ç”»é¢ã‚µã‚¤ã‚ºé©å¿œUI
```typescript
// hooks/useResponsive.ts
export function useResponsive() {
  const [screenSize, setScreenSize] = useState<ScreenSize>('mobile');

  useEffect(() => {
    const checkScreenSize = () => {
      const width = window.innerWidth;
      if (width < 768) {
        setScreenSize('mobile');
      } else if (width < 1024) {
        setScreenSize('tablet');
      } else {
        setScreenSize('desktop');
      }
    };

    checkScreenSize();
    window.addEventListener('resize', checkScreenSize);
    
    return () => window.removeEventListener('resize', checkScreenSize);
  }, []);

  return {
    screenSize,
    isMobile: screenSize === 'mobile',
    isTablet: screenSize === 'tablet',
    isDesktop: screenSize === 'desktop',
  };
}
```

---

## 7. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨

### ğŸŒ Vercelè¨­å®š

#### è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
```json
// vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "functions": {
    "app/api/**/*.ts": {
      "maxDuration": 30
    }
  }
}
```

#### ç’°å¢ƒå¤‰æ•°ç®¡ç†
```bash
# Vercelç’°å¢ƒå¤‰æ•°è¨­å®š
vercel env add GEMINI_API_KEY production
vercel env add SUPABASE_URL production
vercel env add SUPABASE_ANON_KEY production
vercel env add NEWS_API_KEY production
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```javascript
// next.config.js
const { withSentryConfig } = require('@sentry/nextjs');

module.exports = withSentryConfig({
  // æ—¢å­˜è¨­å®š...
  
  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
  experimental: {
    instrumentationHook: true,
    monitoring: {
      relayRequestHeaders: ['user-agent'],
    },
  },
});
```

### ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

#### APIã‚­ãƒ¼ä¿è­·
```typescript
// services/security/apiKeyValidator.ts
export function validateApiKey(apiKey: string): boolean {
  if (!apiKey || apiKey.length < 10) {
    throw new SecurityError('Invalid API key format');
  }
  
  if (apiKey.includes('PLACEHOLDER') || apiKey === 'your_api_key_here') {
    throw new SecurityError('Placeholder API key detected');
  }
  
  return true;
}

export function sanitizeApiKey(apiKey: string): string {
  return apiKey.replace(/[^a-zA-Z0-9_-]/g, '');
}
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼
```javascript
// next.config.js
async headers() {
  return [
    {
      source: '/:path*',
      headers: [
        {
          key: 'X-DNS-Prefetch-Control',
          value: 'on'
        },
        {
          key: 'X-XSS-Protection',
          value: '1; mode=block'
        },
        {
          key: 'X-Frame-Options',
          value: 'SAMEORIGIN'
        },
        {
          key: 'X-Content-Type-Options',
          value: 'nosniff'
        },
        {
          key: 'Referrer-Policy',
          value: 'origin-when-cross-origin'
        },
        {
          key: 'Content-Security-Policy',
          value: "default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"
        }
      ]
    }
  ];
}
```

#### CSPè¨­å®š
```typescript
// middleware.ts
import { NextResponse } from 'next/server';

export function middleware(request: Request) {
  const response = NextResponse.next();
  
  response.headers.set(
    'Content-Security-Policy',
    [
      "default-src 'self'",
      "script-src 'self' 'unsafe-eval' 'unsafe-inline'",
      "style-src 'self' 'unsafe-inline'",
      "img-src 'self' data: https:",
      "connect-src 'self' https://generativelanguage.googleapis.com",
      "media-src 'self'",
      "font-src 'self'"
    ].join('; ')
  );
  
  return response;
}
```

### ğŸ“Š ç›£è¦–ãƒ»åˆ†æ

#### ã‚¨ãƒ©ãƒ¼è¿½è·¡
```typescript
// utils/errorTracking.ts
export class ErrorTracker {
  static track(error: Error, context?: Record<string, any>) {
    const errorInfo = {
      message: error.message,
      stack: error.stack,
      timestamp: new Date().toISOString(),
      context,
      userAgent: navigator.userAgent,
      url: window.location.href,
    };

    // Sentryã«é€ä¿¡
    if (typeof window !== 'undefined' && window.Sentry) {
      window.Sentry.captureException(error, { extra: context });
    }

    // ãƒ­ãƒ¼ã‚«ãƒ«ãƒ­ã‚°
    console.error('Error tracked:', errorInfo);
  }
}
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
```typescript
// utils/performanceMonitor.ts
export class PerformanceMonitor {
  static measureApiCall<T>(
    apiName: string,
    apiCall: () => Promise<T>
  ): Promise<T> {
    const startTime = performance.now();
    
    return apiCall()
      .then(result => {
        const duration = performance.now() - startTime;
        this.recordMetric(apiName, duration, 'success');
        return result;
      })
      .catch(error => {
        const duration = performance.now() - startTime;
        this.recordMetric(apiName, duration, 'error');
        throw error;
      });
  }

  private static recordMetric(
    name: string, 
    duration: number, 
    status: 'success' | 'error'
  ) {
    // Analytics ã«é€ä¿¡
    if (typeof window !== 'undefined' && window.gtag) {
      window.gtag('event', 'api_call', {
        event_category: 'Performance',
        event_label: name,
        value: Math.round(duration),
        custom_map: { status }
      });
    }
  }
}
```

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æ
```typescript
// utils/analytics.ts
export class Analytics {
  static trackUserAction(action: string, category: string, label?: string) {
    if (typeof window !== 'undefined' && window.gtag) {
      window.gtag('event', action, {
        event_category: category,
        event_label: label,
        value: 1
      });
    }
  }

  static trackPageView(page: string) {
    if (typeof window !== 'undefined' && window.gtag) {
      window.gtag('config', 'GA_MEASUREMENT_ID', {
        page_path: page
      });
    }
  }

  static trackConversion(type: 'article_generated' | 'voice_used' | 'abtest_run') {
    this.trackUserAction('conversion', 'engagement', type);
  }
}
```

---

## 8. å®Ÿè£…ãƒãƒ³ã‚ºã‚ªãƒ³

### ğŸ¯ æ–°æ©Ÿèƒ½è¿½åŠ ã®æ‰‹é †

#### 1. å‹å®šç¾©ã®è¿½åŠ 
```typescript
// types/newfeature.types.ts
export interface NewFeatureConfig {
  enabled: boolean;
  settings: {
    option1: string;
    option2: number;
  };
}

export interface NewFeatureResult {
  success: boolean;
  data: any;
  metrics: {
    processingTime: number;
    accuracy: number;
  };
}

// types/index.ts ã«è¿½åŠ 
export * from './newfeature.types';
```

#### 2. ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®å®Ÿè£…
```typescript
// services/newfeature/newFeatureService.ts
import { NewFeatureConfig, NewFeatureResult } from '@/types';

export class NewFeatureService {
  async processNewFeature(
    input: string,
    config: NewFeatureConfig
  ): Promise<NewFeatureResult> {
    const startTime = performance.now();

    try {
      // æ–°æ©Ÿèƒ½ã®ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
      const result = await this.executeFeature(input, config);
      
      const processingTime = performance.now() - startTime;
      
      return {
        success: true,
        data: result,
        metrics: {
          processingTime,
          accuracy: this.calculateAccuracy(result),
        },
      };
    } catch (error) {
      throw new Error(`New feature processing failed: ${error.message}`);
    }
  }

  private async executeFeature(input: string, config: NewFeatureConfig) {
    // å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯
  }

  private calculateAccuracy(result: any): number {
    // ç²¾åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
    return 0.95;
  }
}
```

#### 3. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
```typescript
// components/newfeature/NewFeaturePanel.tsx
import { useState } from 'react';
import { NewFeatureConfig, NewFeatureResult } from '@/types';
import { NewFeatureService } from '@/services/newfeature/newFeatureService';

interface NewFeaturePanelProps {
  onResult: (result: NewFeatureResult) => void;
}

export function NewFeaturePanel({ onResult }: NewFeaturePanelProps) {
  const [isProcessing, setIsProcessing] = useState(false);
  const [input, setInput] = useState('');
  const [config, setConfig] = useState<NewFeatureConfig>({
    enabled: true,
    settings: {
      option1: 'default',
      option2: 10,
    },
  });

  const handleProcess = async () => {
    if (!input.trim()) return;

    setIsProcessing(true);
    try {
      const service = new NewFeatureService();
      const result = await service.processNewFeature(input, config);
      onResult(result);
    } catch (error) {
      console.error('New feature error:', error);
    } finally {
      setIsProcessing(false);
    }
  };

  return (
    <div className="new-feature-panel">
      <h3>æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h3>
      
      <textarea
        value={input}
        onChange={(e) => setInput(e.target.value)}
        placeholder="å…¥åŠ›ã—ã¦ãã ã•ã„..."
        disabled={isProcessing}
        rows={4}
        className="w-full p-3 border rounded-lg"
      />

      <div className="config-section mt-4">
        <label>
          <input
            type="checkbox"
            checked={config.enabled}
            onChange={(e) => setConfig({
              ...config,
              enabled: e.target.checked
            })}
          />
          æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹
        </label>
      </div>

      <button
        onClick={handleProcess}
        disabled={isProcessing || !input.trim()}
        className="mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg disabled:opacity-50"
      >
        {isProcessing ? 'å‡¦ç†ä¸­...' : 'å®Ÿè¡Œ'}
      </button>
    </div>
  );
}
```

#### 4. çµ±åˆãƒ†ã‚¹ãƒˆ
```typescript
// __tests__/newfeature.test.ts
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { NewFeaturePanel } from '@/components/newfeature/NewFeaturePanel';
import { NewFeatureService } from '@/services/newfeature/newFeatureService';

// ãƒ¢ãƒƒã‚¯åŒ–
jest.mock('@/services/newfeature/newFeatureService');
const mockService = NewFeatureService as jest.MockedClass<typeof NewFeatureService>;

describe('NewFeaturePanel', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  test('æ­£å¸¸ãªå…¥åŠ›ã§æ©Ÿèƒ½ãŒå®Ÿè¡Œã•ã‚Œã‚‹', async () => {
    const mockResult = {
      success: true,
      data: 'test result',
      metrics: { processingTime: 100, accuracy: 0.95 }
    };

    mockService.prototype.processNewFeature.mockResolvedValue(mockResult);

    const onResult = jest.fn();
    render(<NewFeaturePanel onResult={onResult} />);

    // å…¥åŠ›
    const textarea = screen.getByPlaceholderText('å…¥åŠ›ã—ã¦ãã ã•ã„...');
    fireEvent.change(textarea, { target: { value: 'ãƒ†ã‚¹ãƒˆå…¥åŠ›' } });

    // å®Ÿè¡Œ
    const button = screen.getByText('å®Ÿè¡Œ');
    fireEvent.click(button);

    // çµæœç¢ºèª
    await waitFor(() => {
      expect(onResult).toHaveBeenCalledWith(mockResult);
    });
  });

  test('ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®å‡¦ç†', async () => {
    mockService.prototype.processNewFeature.mockRejectedValue(
      new Error('å‡¦ç†ã‚¨ãƒ©ãƒ¼')
    );

    const onResult = jest.fn();
    render(<NewFeaturePanel onResult={onResult} />);

    const textarea = screen.getByPlaceholderText('å…¥åŠ›ã—ã¦ãã ã•ã„...');
    fireEvent.change(textarea, { target: { value: 'ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ' } });

    const button = screen.getByText('å®Ÿè¡Œ');
    fireEvent.click(button);

    await waitFor(() => {
      expect(onResult).not.toHaveBeenCalled();
    });
  });
});
```

### ğŸ› ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

#### æ®µéšçš„ãªå•é¡Œåˆ‡ã‚Šåˆ†ã‘
```typescript
// utils/debugHelper.ts
export class DebugHelper {
  static logStep(step: string, data?: any) {
    if (process.env.NODE_ENV === 'development') {
      console.group(`ğŸ” Debug: ${step}`);
      if (data) {
        console.log('Data:', data);
      }
      console.trace('Call stack');
      console.groupEnd();
    }
  }

  static logPerformance(label: string, fn: () => any) {
    if (process.env.NODE_ENV === 'development') {
      console.time(label);
      const result = fn();
      console.timeEnd(label);
      return result;
    }
    return fn();
  }

  static logApiCall(url: string, params: any, response: any) {
    if (process.env.NODE_ENV === 'development') {
      console.group(`ğŸŒ API Call: ${url}`);
      console.log('Parameters:', params);
      console.log('Response:', response);
      console.groupEnd();
    }
  }
}
```

#### ãƒ­ã‚°å‡ºåŠ›ã®æœ€é©åŒ–
```typescript
// utils/logger.ts
enum LogLevel {
  ERROR = 0,
  WARN = 1,
  INFO = 2,
  DEBUG = 3,
}

export class Logger {
  private static level = process.env.NODE_ENV === 'development' ? 
    LogLevel.DEBUG : LogLevel.WARN;

  static error(message: string, error?: Error) {
    if (this.level >= LogLevel.ERROR) {
      console.error(`âŒ [ERROR] ${message}`, error);
    }
  }

  static warn(message: string, data?: any) {
    if (this.level >= LogLevel.WARN) {
      console.warn(`âš ï¸ [WARN] ${message}`, data);
    }
  }

  static info(message: string, data?: any) {
    if (this.level >= LogLevel.INFO) {
      console.info(`â„¹ï¸ [INFO] ${message}`, data);
    }
  }

  static debug(message: string, data?: any) {
    if (this.level >= LogLevel.DEBUG) {
      console.debug(`ğŸ› [DEBUG] ${message}`, data);
    }
  }
}
```

#### é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«æ´»ç”¨
```typescript
// utils/devtools.ts
export function setupDevtools() {
  if (typeof window !== 'undefined' && process.env.NODE_ENV === 'development') {
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒãƒƒã‚°é–¢æ•°ã‚’è¿½åŠ 
    (window as any).debugApp = {
      // ç¾åœ¨ã®çŠ¶æ…‹ã‚’ãƒ­ã‚°å‡ºåŠ›
      logState: () => {
        console.log('App State:', {
          // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ã“ã“ã«
        });
      },
      
      // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±ã‚’è¡¨ç¤º
      showPerformance: () => {
        const navigation = performance.getEntriesByType('navigation')[0];
        console.table(navigation);
      },
      
      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å†…å®¹ç¢ºèª
      showStorage: () => {
        const storage = {};
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key) {
            storage[key] = localStorage.getItem(key);
          }
        }
        console.table(storage);
      },
    };

    console.log('ğŸ› ï¸ Dev tools loaded. Use window.debugApp for debugging.');
  }
}
```

### ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### Playwright E2Eãƒ†ã‚¹ãƒˆ
```typescript
// tests/e2e/article-generation.spec.ts
import { test, expect } from '@playwright/test';

test.describe('è¨˜äº‹ç”Ÿæˆãƒ•ãƒ­ãƒ¼', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/');
  });

  test('æ­£å¸¸ãªè¨˜äº‹ç”Ÿæˆãƒ•ãƒ­ãƒ¼', async ({ page }) => {
    // å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æ“ä½œ
    await page.fill('[data-testid="keyword-input"]', 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’');
    await page.selectOption('[data-testid="tone-select"]', 'ä¸å¯§ã§è½ã¡ç€ã„ãŸ');
    await page.selectOption('[data-testid="audience-select"]', 'åˆå¿ƒè€…å‘ã‘');
    await page.fill('[data-testid="target-length"]', '2500');

    // ç”Ÿæˆé–‹å§‹
    await page.click('[data-testid="generate-button"]');

    // é€²æ—è¡¨ç¤ºã®ç¢ºèª
    await expect(page.locator('[data-testid="step-indicator"]')).toBeVisible();

    // çµæœã®è¡¨ç¤ºã‚’å¾…æ©Ÿï¼ˆæœ€å¤§2åˆ†ï¼‰
    await expect(page.locator('[data-testid="output-display"]')).toBeVisible({
      timeout: 120000
    });

    // ç”Ÿæˆçµæœã®ç¢ºèª
    await expect(page.locator('[data-testid="article-content"]')).toContainText('ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°');
    await expect(page.locator('[data-testid="cover-image"]')).toBeVisible();
    await expect(page.locator('[data-testid="x-posts"]')).toBeVisible();
  });

  test('ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®å‡¦ç†', async ({ page }) => {
    // ç©ºã®å…¥åŠ›ã§ç”Ÿæˆã‚’è©¦è¡Œ
    await page.click('[data-testid="generate-button"]');

    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºç¢ºèª
    await expect(page.locator('[data-testid="error-message"]')).toBeVisible();
    await expect(page.locator('[data-testid="error-message"]')).toContainText('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
  });
});
```

#### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// __tests__/services/geminiService.test.ts
import { createArticleOutline, writeArticle } from '@/services/ai/geminiService';
import { Tone, Audience } from '@/types';

// ãƒ¢ãƒƒã‚¯è¨­å®š
jest.mock('@google/genai');

describe('geminiService', () => {
  describe('createArticleOutline', () => {
    test('æ­£å¸¸ãªã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ç”Ÿæˆ', async () => {
      const outline = await createArticleOutline(
        'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’',
        Tone.POLITE,
        Audience.BEGINNER
      );

      expect(outline).toHaveProperty('title');
      expect(outline).toHaveProperty('metaDescription');
      expect(outline.sections).toHaveLength.greaterThan(0);
      expect(outline.faq).toHaveLength.greaterThan(0);
    });

    test('ä¸æ­£ãªå…¥åŠ›ã§ã‚¨ãƒ©ãƒ¼', async () => {
      await expect(
        createArticleOutline('', Tone.POLITE, Audience.BEGINNER)
      ).rejects.toThrow('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç©ºã§ã™');
    });
  });

  describe('writeArticle', () => {
    test('è¨˜äº‹ç”Ÿæˆã®æ–‡å­—æ•°ç¢ºèª', async () => {
      const mockOutline = {
        title: 'ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«',
        metaDescription: 'ãƒ†ã‚¹ãƒˆèª¬æ˜',
        sections: [{ title: 'ã‚»ã‚¯ã‚·ãƒ§ãƒ³1', points: ['ãƒã‚¤ãƒ³ãƒˆ1'] }],
        faq: []
      };

      const article = await writeArticle(mockOutline, 2500);
      
      expect(article.length).toBeGreaterThan(2000);
      expect(article.length).toBeLessThan(3000);
      expect(article).toContain('ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«');
    });
  });
});
```

#### APIãƒ†ã‚¹ãƒˆæ‰‹æ³•
```typescript
// __tests__/api/tavily-search.test.ts
import { POST } from '@/app/api/tavily-search/route';
import { NextRequest } from 'next/server';

describe('/api/tavily-search', () => {
  test('æ­£å¸¸ãªæ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆ', async () => {
    const request = new NextRequest('http://localhost:3000/api/tavily-search', {
      method: 'POST',
      body: JSON.stringify({
        query: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’',
        maxResults: 5
      }),
      headers: {
        'Content-Type': 'application/json'
      }
    });

    const response = await POST(request);
    const data = await response.json();

    expect(response.status).toBe(200);
    expect(data).toHaveProperty('results');
    expect(Array.isArray(data.results)).toBe(true);
    expect(data.results.length).toBeLessThanOrEqual(5);
  });

  test('ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£', async () => {
    const request = new NextRequest('http://localhost:3000/api/tavily-search', {
      method: 'POST',
      body: JSON.stringify({}),
      headers: {
        'Content-Type': 'application/json'
      }
    });

    const response = await POST(request);
    expect(response.status).toBe(400);
  });
});
```

### ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²æˆ¦ç•¥
```typescript
// å¤§ããªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ©Ÿèƒ½åˆ¥ã«åˆ†å‰²
// Before: å·¨å¤§ãªArticleGenerator
// After: è²¬ä»»åˆ†é›¢

// components/article/ArticleGenerator.tsx
export function ArticleGenerator() {
  return (
    <div className="article-generator">
      <ArticleInputForm onSubmit={handleSubmit} />
      <ArticleProgressIndicator currentStep={currentStep} />
      <ArticleOutput output={output} />
    </div>
  );
}

// components/article/ArticleInputForm.tsx
export function ArticleInputForm({ onSubmit }: Props) {
  // ãƒ•ã‚©ãƒ¼ãƒ ã®ã¿ã®è²¬ä»»
}

// components/article/ArticleProgressIndicator.tsx
export function ArticleProgressIndicator({ currentStep }: Props) {
  // é€²æ—è¡¨ç¤ºã®ã¿ã®è²¬ä»»
}

// components/article/ArticleOutput.tsx
export function ArticleOutput({ output }: Props) {
  // çµæœè¡¨ç¤ºã®ã¿ã®è²¬ä»»
}
```

#### çŠ¶æ…‹ç®¡ç†ã®æœ€é©åŒ–
```typescript
// contexts/ArticleContext.tsx
interface ArticleContextType {
  state: ArticleState;
  actions: {
    startGeneration: (formData: FormData) => Promise<void>;
    updateStep: (step: ProcessStep) => void;
    setError: (error: string) => void;
    reset: () => void;
  };
}

export function ArticleProvider({ children }: { children: React.ReactNode }) {
  const [state, setState] = useState<ArticleState>(initialState);

  const actions = useMemo(() => ({
    startGeneration: async (formData: FormData) => {
      // ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
    },
    updateStep: (step: ProcessStep) => {
      setState(prev => ({ ...prev, currentStep: step }));
    },
    setError: (error: string) => {
      setState(prev => ({ ...prev, error, currentStep: ProcessStep.ERROR }));
    },
    reset: () => {
      setState(initialState);
    },
  }), []);

  return (
    <ArticleContext.Provider value={{ state, actions }}>
      {children}
    </ArticleContext.Provider>
  );
}

// hooks/useArticle.ts
export function useArticle() {
  const context = useContext(ArticleContext);
  if (!context) {
    throw new Error('useArticle must be used within ArticleProvider');
  }
  return context;
}
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```typescript
// utils/performanceOptimizer.ts
export class PerformanceOptimizer {
  private static memoryUsage = new Map<string, number>();
  private static renderTimes = new Map<string, number[]>();

  static trackMemoryUsage(componentName: string) {
    if (typeof window !== 'undefined' && 'memory' in performance) {
      const memory = (performance as any).memory;
      this.memoryUsage.set(componentName, memory.usedJSHeapSize);
    }
  }

  static trackRenderTime(componentName: string, renderTime: number) {
    const times = this.renderTimes.get(componentName) || [];
    times.push(renderTime);
    
    // æœ€æ–°100å›åˆ†ã®ã¿ä¿æŒ
    if (times.length > 100) {
      times.shift();
    }
    
    this.renderTimes.set(componentName, times);
  }

  static getPerformanceReport(): PerformanceReport {
    const report: PerformanceReport = {
      memoryUsage: Object.fromEntries(this.memoryUsage),
      averageRenderTimes: {},
      recommendations: [],
    };

    // å¹³å‡ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ã‚’è¨ˆç®—
    for (const [component, times] of this.renderTimes) {
      const average = times.reduce((a, b) => a + b, 0) / times.length;
      report.averageRenderTimes[component] = average;

      // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ææ¡ˆ
      if (average > 100) {
        report.recommendations.push(
          `${component}ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“ãŒé•·ã™ãã¾ã™ (${average.toFixed(2)}ms)`
        );
      }
    }

    return report;
  }
}

// React DevToolsç”¨ã®Profilerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export function PerformanceProfiler({ 
  name, 
  children 
}: { 
  name: string; 
  children: React.ReactNode; 
}) {
  const onRender = useCallback((
    id: string,
    phase: 'mount' | 'update',
    actualDuration: number
  ) => {
    PerformanceOptimizer.trackRenderTime(id, actualDuration);
  }, []);

  return (
    <Profiler id={name} onRender={onRender}>
      {children}
    </Profiler>
  );
}
```

---

## ğŸ“‹ è¬›ç¾©ã®æµã‚Œ (60åˆ†æ§‹æˆ)

### â° ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«

| æ™‚é–“ | å†…å®¹ | è©³ç´° |
|------|------|------|
| **0-10åˆ†** | **å°å…¥** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»Phase 1.5æˆæœå ±å‘Š |
| **10-25åˆ†** | **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ·±æ˜ã‚Š** | æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãƒ»è¨­è¨ˆæ€æƒ³ãƒ»é¸å®šç†ç”± |
| **25-35åˆ†** | **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è§£èª¬** | ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆãƒ»å‘½åè¦å‰‡ãƒ»ä¿å®ˆæ€§ |
| **35-50åˆ†** | **å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ç´¹ä»‹** | å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ |
| **50-60åˆ†** | **ãƒãƒ³ã‚ºã‚ªãƒ³å®Ÿæ¼”** | ãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»Q&A |

### ğŸ¯ å­¦ç¿’ç›®æ¨™

å‚åŠ è€…ãŒã“ã®è¬›ç¾©ã§ç¿’å¾—ã™ã‚‹ã“ã¨ï¼š

1. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç†è§£**: ãªãœã“ã®æ§‹æˆã«ã—ãŸã®ã‹ã€æŠ€è¡“é¸å®šã®èƒŒæ™¯
2. **å®Ÿè£…ãƒã‚¦ãƒã‚¦**: åŠ¹ç‡çš„ãªé–‹ç™ºæ‰‹æ³•ã€ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹
3. **é‹ç”¨çŸ¥è­˜**: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ç›£è¦–ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
4. **å®Ÿè·µã‚¹ã‚­ãƒ«**: æ–°æ©Ÿèƒ½è¿½åŠ ãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆã®å…·ä½“çš„æ‰‹é †

---

**ğŸš€ æº–å‚™å®Œäº†ï¼21:30ã‹ã‚‰ã®å‹‰å¼·ä¼šã§ã€note-agentã®æ·±ã„å®Ÿè£…çŸ¥è­˜ã‚’å…±æœ‰ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼**