# 🧭 note記事自動生成エージェント 要件定義書（正式版）

## 1. プロジェクト概要

### 1.1 名称

**note記事自動生成エージェント**

### 1.2 目的

「誰でも、たった数分で"SEOに強く・読まれる"note記事を生成できること」。
構成設計、本文執筆、画像生成、投稿準備までを一気通貫で自動化し、クリエイターが「発想と表現」に集中できる環境を作る。

### 1.3 背景

* AIライティングが一般化する中で、**"記事の量産"ではなく"高品質な一貫性ある発信"**が求められている。
* **note記事に特化**し、noteプラットフォームのアルゴリズム理解を踏まえた最適化を実現。
* **AIっぽいライティングの改善**：自然で人間らしい文章表現をプロンプト最適化により実現。翻訳調の表現や機械的な文体を排除し、共感性と読みやすさを重視。
* Gemini 2.5 Proの高度な日本語処理能力とマルチモーダル機能により、**テキスト・画像・リサーチを統合した記事生成**が可能に。

---

## 2. サービスコンセプト（＝サービスの「魂」）

| 観点          | 内容                                                                         |
| ----------- | -------------------------------------------------------------------------- |
| WHY（なぜ）     | 書く時間ではなく、**リサーチと戦略に集中できる環境**を提供するため。AIっぽくない自然な文章で、読者に響く記事を生成。 |
| WHAT（何を）    | note記事の統合自動生成エージェント。**統合リサーチ → SEO分析 → 構成作成 → 執筆 → 画像生成 → SNS展開**までを一気通貫で自動化。 |
| WHO（誰に）     | note運営者、ブロガー、企業の広報担当、ライター志望者、SNSマーケター。                                              |
| HOW（どう実現する） | **React + TypeScript + Gemini 2.5 Pro + Imagen 3 + 外部API統合**。マルチソースリサーチとマルチモーダル生成を組み合わせた次世代エージェント。 |

---

## 3. 登場人物（ユーザー定義）

| 役割              | 説明                          |
| --------------- | --------------------------- |
| 一般ユーザー          | note記事を作成したい人。テーマ・トーンなどを入力。 |
| システム（AIエージェント）  | 構成・本文・画像を自動生成し、成果物を出力。      |
| note投稿者（拡張ユーザー） | 生成結果をnote上で公開し、編集・加筆を行う。    |

---

## 4. 主なユースケース

1. **キーワードからの記事生成（統合リサーチ付き）**
   　→ 例：「副業 始め方」を入力 → 統合リサーチ（Google検索＋note人気記事＋SNSトレンド） → SEO分析 → 構成案 → 本文 → 画像生成 → X告知文。

2. **YouTube動画URLからの記事生成**
   　→ 動画文字起こし→ 要約→ note記事化 → 関連トレンドリサーチ → SNS展開文生成。

3. **テーマ・トーン指定によるブランド一貫ライティング**
   　→ tone=「フレンドリー」＋ audience=「初心者向け」などで一貫性を維持。AIっぽくない自然な文体を実現。

4. **長文記事生成（5,000〜10,000文字）+ 差し込み図解**
   　→ 複雑なテーマを体系的に解説。マルチモーダル機能で図解を自動生成し視覚的に理解しやすく。

5. **SNS連携訴求（X告知文 + スレッド展開）**
   　→ 記事公開と同時に、ターゲット別のX投稿文を5パターン生成。長文・スレッド形式にも展開。

6. **トレンド記事の高速生成**
   　→ SNSやnoteで話題のテーマをリサーチし、タイムリーな記事を自動生成。アルゴリズム最適化でリーチ最大化。

---

## 5. 機能要件【第1回・第2回を統合】

### 5.1 入力項目（ユーザー入力UI）

| 項目                   | 型        | 説明                | 例 / デフォルト      |
| -------------------- | -------- | ----------------- | -------------- |
| キーワード or YouTube URL | text     | 記事の主題入力           | 「副業 始め方」       |
| 文体（トーン）              | dropdown | 丁寧 / フレンドリー / 専門的 | 丁寧             |
| 想定読者層                | dropdown | 初心者 / 中級者 / 上級者   | 初心者            |
| 文字数目安                | dropdown | 本文の長さ             | 2500 / 5000 / 10000 |
| 画像生成オプション            | checkbox | アイキャッチ / 差し込み図解   | アイキャッチのみ       |

---

### 5.2 記事生成フロー（Buildワークフロー構成）

#### Step 0. 統合リサーチ機能【主力機能】

* **処理**: 複数の情報源から最新データを収集・分析
* **リサーチ対象**:
  * **外部検索API / Google Search API**: キーワードの検索トレンド、上位記事の分析
  * **note プラットフォーム分析**: 伸びている投稿、スキ数、閲覧数の高い記事の傾向分析
  * **SNS トレンド**: X（Twitter）やThreadsでのトレンド性、話題性の調査
  * **SEO 最新情報**: 検索ボリューム、関連キーワード、競合度の把握
  * **アルゴリズム理解**: noteのレコメンドアルゴリズムを踏まえた最適化ポイント
* **出力**:
  * 最新トレンド情報
  * note で人気の記事構成パターン
  * SNS での訴求ポイント
  * SEO キーワード候補
  * 差別化のための独自視点

#### Step 1. 検索意図・SEO分析

* **処理**: Gemini 2.5 Pro + リサーチデータによる包括的分析
* **出力**:
  * 検索意図の深掘り
  * 上位記事構成共通点
  * 差別化要素
  * 想定FAQ
  * note アルゴリズムに最適化された構成提案

#### Step 2. 記事構成案生成

* **処理**: Step1出力＋ユーザー指定をもとにJSON構造で設計。
* **出力構造例（JSON）**:

  ```json
  {
    "title": "初心者でも安心！副業の始め方完全ガイド",
    "metaDescription": "未経験から副業を始めるための準備と注意点をわかりやすく解説。",
    "sections": [
      {"h2": "なぜ今、副業が注目されているのか？", "summary": "..."},
      {"h2": "副業を始める前に決めるべき3つのこと", "summary": "..."}
    ],
    "faq": [{"q": "副業で確定申告は必要？", "a": "はい、収入が20万円を超えると必要です。"}]
  }
  ```

#### Step 3. 本文生成（Markdown出力）

* **生成条件**:
  * **自然で人間らしい文体**: 翻訳調や機械的な表現を完全排除
  * **禁止表現の徹底**:
    * 「〜することができます」→「〜できます」or 別の自然な表現
    * 「〜について説明します」→ 直接内容に入る
    * 定型的なAI文章パターンの回避
  * **共感性の重視**:
    * 少なくとも2〜3箇所に「体験談」「具体例」を挿入
    * 読者への問いかけや寄り添う表現
    * 温かみのある言葉選び
  * **見出し構造**: H2/H3階層で論理的に構成
  * **文字数対応**: 2,500 / 5,000 / 10,000文字に対応

#### Step 4. 画像生成（マルチモーダル対応）

##### 4-1. アイキャッチ画像生成
* **Gemini Imagen 3 API**による高品質画像生成
* **プロンプト例**:
  > 「ブログ執筆を楽しむ女性 フリーランス 明るい背景 pastel style 16:9」
* **出力**: base64形式 or ダウンロードリンク

##### 4-2. 差し込み図解生成（オプション）
* **処理**: 記事内の複雑な概念を視覚化
* **生成対象**:
  * プロセス図（フローチャート）
  * 比較表のビジュアル化
  * 統計データのグラフ
  * 概念の図解
* **マルチモーダル活用**: テキスト内容をGeminiが理解し、最適な図解を自動生成
* **挿入位置**: 記事構成に応じて最適な位置を自動判定

#### Step 5. X（Twitter）告知文生成【新機能】

* **処理**: 生成した記事をSNSで訴求する短文を複数パターン生成
* **生成条件**:
  * **文字数制限**: 140文字以内（X標準）
  * **ターゲット変化**: 複数の顧客層に向けて訴求文を変える
  * **パターン出力**: 最低5パターン
* **出力例**:
  ```
  【初心者向け】「副業ってどう始めればいいの？」そんな悩みを持つあなたへ。失敗しない副業の始め方を実体験をもとにまとめました📝 #副業 #初心者
  
  【経験者向け】副業で月5万円稼ぐまでにやったこと、全部書きました。これから副業を本格化させたい方は必見です💡 #副業収入 #フリーランス
  ```

##### 5-1. 長文ポスト・スレッド形式展開
* **処理**: 短文ポストを起点に、長文やスレッド形式に展開
* **展開パターン**:
  * **長文ポスト**: 記事のサマリーを300〜500文字で訴求
  * **スレッド形式**: 5〜7ツイートで記事の要点を連投形式で展開
  * **引用ポスト**: 記事の一部を引用して訴求

#### Step 6. 出力整形（UI表示）

* メタ情報＋本文＋画像＋SNS告知文をカード形式で表示
* 「Copy Markdown」「Copy X Posts」ボタン
* 「note投稿手順」リンク付き
* 差し込み図解の配置プレビュー

---

## 6. 非機能要件【第2回準拠】

| 観点        | 要件                                    |
| --------- | ------------------------------------- |
| UI/UX     | 生成中のステップ表示・進捗バー（7段階表示）。レスポンシブ対応。各ステップの処理内容を可視化。 |
| パフォーマンス   | 記事生成は60秒以内（5000文字基準）、90秒以内（10000文字基準）。リサーチAPIは並列処理で高速化。 |
| セキュリティ    | APIキーはサーバー側で保持。ユーザー環境に保存しない。外部API連携時の認証管理。メモリ機能（Phase 2）ではユーザーデータの暗号化と適切なアクセス制御。 |
| エラーハンドリング | Gemini呼び出し失敗時にリトライ＆エラーメッセージ表示。外部API接続エラー時の代替処理。 |
| 拡張性       | note投稿API、外部CMS連携、スケジュール投稿機能に対応可能な設計。モジュール化されたリサーチ機能で新規データソース追加が容易。メモリ機能の段階的実装に対応。 |
| API管理     | Google Search API、note API（将来）、X API（将来）の統合管理。レート制限への対応。 |
| データ管理（Phase 2） | Supabaseによる永続化。ユーザープロファイル、投稿履歴、学習データの適切な管理。GDPR準拠のデータ削除機能。 |

---

## 7. 今後の発展ロードマップ【第3・4回と連動】

| フェーズ    | 内容                         | 担当ツール            | 主な機能 |
| ------- | -------------------------- | ---------------- | --- |
| Phase 1 | note記事生成エージェントβ版 | React + TypeScript + Vite | 統合リサーチ、記事生成、差し込み図解、X告知文生成 |
| Phase 2 | 自動投稿機能＋外部API連携＋メモリ機能 | Cursor + GitHub + Supabase | note API連携、X API連携、記事履歴データベース化、投稿スタイル記憶機能 |
| Phase 3 | 記事履歴管理＋分析ダッシュボード | Git連携（自動PR） + Analytics | 生成履歴の可視化、効果測定、A/Bテスト機能 |
| Phase 4 | note×他SNS同時展開＋スケジューリング | Vercel + Cron | X/Threads/Instagram同時投稿、予約投稿機能 |

---

## 8. 参考リンク・競合分析

### 競合ツール

* **tsumugi**（https://www.tsumugi-ai.com/）
  　→ 企業向け自動記事生成。SEO×白書特化。
* **AI Note Creation Assistant**（YouWare）
  　→ グローバル対応、テーマ別構成案中心。
* **Jasper / Copy.ai**
  　→ 英語圏での汎用的なAIライティングツール。

### 本ツールの差別化ポイント

1. **統合リサーチ機能**：Google Search、note、SNSトレンドを統合分析（主力機能）
2. **AIっぽくないライティング**：翻訳調排除、共感性重視、体験談挿入による自然な文体
3. **note特化最適化**：noteアルゴリズム理解に基づいた構成・表現の最適化
4. **マルチモーダル生成**：差し込み図解を自動生成し、視覚的に理解しやすい記事を実現
5. **SNS展開統合**：X告知文、スレッド展開まで自動生成し、記事公開後の拡散まで支援
6. **日本語特化**：Gemini 2.5 Proの高度な日本語処理能力を最大限活用

---

## 9. 開発環境・使用技術（詳細設計要素）

| 項目         | 内容                        |
| ---------- | ------------------------- |
| フロントエンド | React + TypeScript + Vite |
| AIモデル     | Gemini 2.5 Pro（テキスト生成） / Imagen 3（画像生成） |
| 外部API連携 | Google Search API / note API（予定） / X API（予定） |
| リサーチ機能 | マルチソース統合リサーチ（検索API、SNS API、Webスクレイピング） |
| ストレージ      | ローカルストレージ（Phase 1） → Supabase（Phase 2以降）   |
| データ形式      | Markdown / JSON / base64（画像）           |
| デプロイ    | ローカル開発 → Vercel（Phase 2以降） |
| バージョン管理 | Git + GitHub（記事生成履歴も管理） |

---

## 10. 出力サンプル（統合ワークフロー形式）

```json
{
  "input": {
    "keyword": "AIライティング 効率化",
    "tone": "丁寧",
    "audience": "初心者",
    "length": 5000,
    "imageOptions": {
      "eyecatch": true,
      "inlineGraphics": true
    }
  },
  "workflow": [
    {
      "step": 0,
      "name": "integrated_research",
      "description": "統合リサーチ機能",
      "apis": ["Google Search API", "note Platform Analysis", "SNS Trend Analysis"]
    },
    {
      "step": 1,
      "name": "seo_analysis",
      "description": "検索意図・SEO分析"
    },
    {
      "step": 2,
      "name": "outline_generation",
      "description": "記事構成案生成"
    },
    {
      "step": 3,
      "name": "article_generation",
      "description": "本文生成（AI表現排除、共感性重視）"
    },
    {
      "step": 4,
      "name": "image_generation",
      "description": "画像生成（アイキャッチ + 差し込み図解）",
      "model": "Imagen 3"
    },
    {
      "step": 5,
      "name": "x_post_generation",
      "description": "X告知文生成（複数パターン + スレッド展開）"
    },
    {
      "step": 6,
      "name": "final_output",
      "description": "出力整形・UI表示"
    }
  ],
  "output": {
    "article": {
      "title": "...",
      "metaDescription": "...",
      "content": "...",
      "wordCount": 5000
    },
    "images": {
      "eyecatch": "base64_data",
      "inlineGraphics": ["base64_data_1", "base64_data_2"]
    },
    "socialMedia": {
      "xPosts": [
        {
          "target": "初心者",
          "text": "..."
        },
        {
          "target": "経験者",
          "text": "..."
        }
      ],
      "threads": [
        ["tweet1", "tweet2", "tweet3"]
      ]
    },
    "research": {
      "trends": "...",
      "seoKeywords": ["keyword1", "keyword2"],
      "notePopularPatterns": "..."
    }
  }
}
```

---

## 11. 主要機能の優先順位

### Phase 1（MVP）で実装する機能

1. ✅ **統合リサーチ機能**（主力機能）
2. ✅ SEO分析・記事構成生成
3. ✅ 本文生成（AIっぽくないライティング）
4. ✅ アイキャッチ画像生成
5. ✅ X告知文生成（基本パターン）

### Phase 1.5（早期追加）で実装する機能

6. ⚪ 差し込み図解生成
7. ⚪ スレッド形式展開
8. ⚪ 10,000文字対応

### Phase 2以降で実装する機能

9. 🔲 note自動投稿API連携
10. 🔲 X自動投稿API連携
11. 🔲 記事履歴データベース化
12. 🔲 効果測定・分析機能
13. 🔲 **メモリ機能**（投稿スタイル記憶・パーソナライズ）

---

## 12. メモリ機能（Phase 2以降の実装）

### 12.1 機能概要

ユーザーの投稿スタイルや過去の投稿内容を記憶し、一貫性のあるパーソナライズされた記事生成を実現する機能。データベース（Supabase）やクラウドストレージと連携して、長期的な学習とブランディングの維持を支援。

### 12.2 記憶する情報

#### ユーザープロファイル
- **基本設定**: よく使うトーン、ターゲット読者層、文字数の傾向
- **文体の特徴**: 
  - 語尾の癖（です・ます調 vs だ・である調）
  - よく使う接続詞や表現
  - 一人称の使い方（私、僕、筆者など）
  - 絵文字の使用頻度と傾向
- **専門分野**: よく扱うテーマ・ジャンル
- **NGワード/NGトピック**: 避けるべき表現や話題

#### 投稿履歴
- **過去の記事データ**:
  - タイトルパターン
  - 見出し構造の傾向
  - よく使うキーワード
  - 画像スタイルの好み
- **パフォーマンスデータ**:
  - スキ数、閲覧数、コメント数
  - 反響の良かった記事の特徴分析
  - 曜日・時間帯別の投稿実績

#### ブランドガイドライン
- **ビジュアルアイデンティティ**: 
  - カラーパレット
  - 画像のトーン＆マナー
  - ロゴ・透かしの配置
- **メッセージング**: 
  - コアメッセージ
  - 価値観・ミッション
  - ターゲットペルソナの詳細

### 12.3 メモリ機能の活用シーン

1. **初回設定後の自動最適化**
   - 2〜3記事生成後、自動的にスタイルを学習
   - 「あなたらしい」文章表現を提案

2. **ブランド一貫性の維持**
   - 複数人で運用する企業アカウントでも、統一された文体を維持
   - トーン＆マナーガイドラインに自動適合

3. **過去記事との重複回避**
   - 同じテーマで記事生成時、過去記事との差別化を自動提案
   - 「以前書いた〇〇記事」として内部リンク候補を提示

4. **成功パターンの再現**
   - 反響の良かった記事の構成・表現を分析
   - 次回記事生成時に成功要素を取り入れる

5. **進化する文体**
   - ユーザーの編集・加筆内容から学習
   - 自然にスタイルが進化・洗練される

### 12.4 技術実装（Phase 2）

#### データストレージ
- **Supabase**: ユーザープロファイル、投稿履歴、設定情報
- **PostgreSQL**: 構造化データの保存
- **Vector Database**: 文体の埋め込み表現を保存し、類似性検索

#### メモリ管理
```typescript
interface UserMemory {
  userId: string;
  profile: {
    preferredTone: string;
    targetAudience: string;
    writingStyle: {
      sentenceEndings: string[];
      commonPhrases: string[];
      firstPersonPronoun: string;
      emojiFrequency: 'none' | 'low' | 'medium' | 'high';
    };
    ngWords: string[];
    specialties: string[];
  };
  history: {
    articles: Article[];
    performance: ArticlePerformance[];
    successPatterns: string[];
  };
  brandGuidelines?: {
    visualIdentity: VisualStyle;
    messaging: CoreMessage;
  };
  lastUpdated: Date;
}
```

#### 学習・適用フロー
1. **投稿後のフィードバック収集**
   - ユーザーの編集内容を分析
   - 「この表現が好き」「この構成が良い」を学習

2. **次回生成時の適用**
   - メモリデータをプロンプトに注入
   - 「以下のスタイルで記事を生成してください」として指示

3. **定期的な再学習**
   - 週次・月次でスタイルの傾向を再分析
   - ユーザーの成長・変化に対応

### 12.5 ユーザー設定UI（Phase 2）

- **メモリ管理画面**: 学習した内容の確認・編集
- **スタイルプレビュー**: 「あなたのスタイル」を可視化
- **リセット機能**: スタイル学習をやり直す
- **インポート/エクスポート**: 設定の移行・バックアップ

---

この要件定義書をもとに、**React + TypeScript + Vite** での実装を進めます。
